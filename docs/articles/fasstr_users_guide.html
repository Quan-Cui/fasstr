<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>fasstr Users Guide • fasstr</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="fasstr Users Guide">
<meta property="og:description" content="fasstr">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">fasstr</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.3.2</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fa fa-home"></span>
     
  </a>
</li>
<li>
  <a href="../articles/fasstr.html">Get Started</a>
</li>
<li>
  <a href="../reference/index.html">Functions</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/index.html">All Articles</a>
    </li>
    <li class="divider">
    <li class="dropdown-header">Tutorials</li>
    <li>
      <a href="../articles/fasstr_users_guide.html">General Usage</a>
    </li>
    <li>
      <a href="../articles/fasstr_trending_analysis.html">Computing Annual Trends</a>
    </li>
    <li>
      <a href="../articles/fasstr_frequency_analysis.html">Computing Volume Frequency Analyses</a>
    </li>
    <li>
      <a href="../articles/fasstr_full_analysis.html">Computing a Full Analysis</a>
    </li>
    <li class="divider">
    <li class="dropdown-header">Under the Hood</li>
    <li>
      <a href="../articles/fasstr_under_the_hood.html">Internal Workflows</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/bcgov/fasstr/raw/master/fasstr_cheatsheet.pdf">
    <span class="fa fa-file-download"></span>
     
    Download Cheatsheet
  </a>
</li>
<li>
  <a href="https://github.com/bcgov/fasstr">
    <span class="fa fa-github fa-lg"></span>
     
    GitHub
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="fasstr_users_guide_files/header-attrs-2.5/header-attrs.js"></script><script src="fasstr_users_guide_files/accessible-code-block-0.0.1/empty-anchor.js"></script><link href="fasstr_users_guide_files/anchor-sections-1.0/anchor-sections.css" rel="stylesheet">
<script src="fasstr_users_guide_files/anchor-sections-1.0/anchor-sections.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>fasstr Users Guide</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/bcgov/fasstr/blob/master/vignettes/fasstr_users_guide.Rmd"><code>vignettes/fasstr_users_guide.Rmd</code></a></small>
      <div class="hidden name"><code>fasstr_users_guide.Rmd</code></div>

    </div>

    
    
<p><code>fasstr</code>, the Flow Analysis Summary Statistics Tool for R, is a set of <a href="https://www.r-project.org/">R</a> functions to tidy, summarize, analyze, trend, and visualize streamflow data. This package summarizes continuous daily mean streamflow data into various daily, monthly, annual, and long-term statistics, completes trending and frequency analyses, with outputs in both table and plot formats.</p>
<p>This vignette documents the usage of the many functions and arguments provided in <code>fasstr</code>. This vignette is a high-level adjunct to the details found in the various function documentations (see <code><a href="https://bcgov.github.io/fasstr/reference">help(package = "fasstr")</a></code> for documentation). You’ll learn how to install the package and a HYDAT database, input data into <code>fasstr</code> functions, add relevant columns and rows to daily data, screen data for outliers and missing dates, calculate and visualize various summary statistics, trend annual flows, and complete volume frequency analyses.</p>
<p>A quick reference PDF cheat sheet is also available for <code>fasstr</code> usage of functions and arguments. It can be downloaded <a href="https://github.com/bcgov/fasstr/raw/master/fasstr_cheatsheet.pdf">here</a>.</p>
<p>This guide contains the following sections to help understand the usage of the <code>fasstr</code> functions and arguments:</p>
<ol style="list-style-type: decimal">
<li>Getting Started</li>
<li>Flow Data Inputs</li>
<li>Function Outputs</li>
<li>Data Tidying (<code>fill_*</code> and <code>add_*</code> functions)</li>
<li>Data Screening (<code>screen_*</code> functions)</li>
<li>Calculating Statistics (<code>calc_*</code> functions)</li>
<li>Analyses (<code>compute_*</code> functions)</li>
<li>Customizing Functions - Data filtering and options</li>
<li>Writing Tables and Plots (<code>write_*</code> functions)</li>
</ol>
<div id="getting-started" class="section level2">
<h2 class="hasAnchor">
<a href="#getting-started" class="anchor"></a>1. Getting Started</h2>
<div id="installing-and-loading-fasstr" class="section level3">
<h3 class="hasAnchor">
<a href="#installing-and-loading-fasstr" class="anchor"></a>Installing and loading fasstr</h3>
<p>You can install <code>fasstr</code> directly from <a href="https://cran.r-project.org/package=fasstr">CRAN</a>:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span><span class="op">(</span><span class="st">"fasstr"</span><span class="op">)</span></code></pre></div>
<p>To install the development version from <a href="https://github.com/bcgov/fasstr">GitHub</a>, use the <a href="https://cran.r-project.org/package=remotes"><code>remotes</code></a> package then the <code>fasstr</code> package:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw">if</span><span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/ns-load.html">requireNamespace</a></span><span class="op">(</span><span class="st">"remotes"</span><span class="op">)</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span><span class="op">(</span><span class="st">"remotes"</span><span class="op">)</span>
<span class="fu">remotes</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html">install_github</a></span><span class="op">(</span><span class="st">"bcgov/fasstr"</span><span class="op">)</span></code></pre></div>
<p>Several other packages will be installed with <code>fasstr</code>. These include <a href="https://CRAN.R-project.org/package=tidyhydat"><code>tidyhydat</code></a> for downloading Water Survey of Canada hydrometric data, <a href="https://CRAN.R-project.org/package=zyp"><code>zyp</code></a> for trending, <a href="https://CRAN.R-project.org/package=ggplot2"><code>ggplot2</code></a> for creating plots, and <a href="https://CRAN.R-project.org/package=tidyr"><code>tidyr</code></a> and <a href="https://CRAN.R-project.org/package=dplyr"><code>dplyr</code></a> for data wrangling and summarizing, amongst others.</p>
<p>To call <code>fasstr</code> functions you can either load the package using the <code><a href="https://rdrr.io/r/base/library.html">library()</a></code> function or access a specific function using a double-colon (e.g. <code><a href="../reference/calc_daily_stats.html">fasstr::calc_daily_stats()</a></code>). <code>fasstr</code> exports the pipe, <code><a href="https://rdrr.io/pkg/magrittr/man/pipe.html">%&gt;%</a></code>, so it can be used for tidy workflows. For this vignette, functions from the <code>dplyr</code> package will also be used.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://bcgov.github.io/fasstr/">fasstr</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org">dplyr</a></span><span class="op">)</span></code></pre></div>
</div>
<div id="downloading-hydat" class="section level3">
<h3 class="hasAnchor">
<a href="#downloading-hydat" class="anchor"></a>Downloading HYDAT</h3>
<p>To use the <code>station_number</code> argument of the <code>fasstr</code> functions, you will need to download a <a href="https://www.canada.ca/en/environment-climate-change/services/water-overview/quantity/monitoring/survey/data-products-services/national-archive-hydat.html">Water Survey of Canada HYDAT database</a> to your computer using the following <code>tidyhydat</code> function. The function will save the database on your computer and know where to find it each time you open R or RStudio. Due to the size of the database, it will take several minutes to download.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">tidyhydat</span><span class="fu">::</span><span class="fu"><a href="https://docs.ropensci.org/tidyhydat/reference/download_hydat.html">download_hydat</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<p>As HYDAT is updated frequently you may want to periodically update it yourself using the function above. You can check the local version using the following code:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">tidyhydat</span><span class="fu">::</span><span class="fu"><a href="https://docs.ropensci.org/tidyhydat/reference/hy_version.html">hy_version</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<hr>
</div>
</div>
<div id="flow-data-inputs" class="section level2">
<h2 class="hasAnchor">
<a href="#flow-data-inputs" class="anchor"></a>2. Flow Data Inputs</h2>
<p>All functions in <code>fasstr</code> require a daily mean streamflow data set from one or more hydrometric stations. Long-term and continuous data sets are preferred for most analyses, but seasonal and partial data can be used. Note that if partial data sets are used, <code>NA</code>‘s may be produced for certain statistics. Please see the ’Handling Missing Dates’ section in Section 8 for more information. Data is provided to each function using one of the following arguments:</p>
<ul>
<li>
<code>data</code>, as a data frame of daily flow values, or</li>
<li>
<code>station_number</code>, as a list of Water Survey of Canada HYDAT station numbers.</li>
</ul>
<div id="data-and-dates-values-and-groups" class="section level3">
<h3 class="hasAnchor">
<a href="#data-and-dates-values-and-groups" class="anchor"></a><code>data</code> (and <code>dates</code>, <code>values</code>, and <code>groups</code>)</h3>
<p>Using the <code>data</code> option, a data frame of daily data containing columns of dates (YYYY-MM-DD in date format), values (mean daily discharge in cubic metres per second in numeric format), and, optionally, grouping identifiers (character string of station names or numbers) is called. By default, the functions will look for columns identified as ‘Date’, ‘Value’, and ‘STATION_NUMBER’, respectively, to be compatible with the HYDAT default columns. However, columns of different names can be identified using the <code>dates</code>, <code>values</code>, <code>groups</code> column arguments (ex. <code>values = Yield_mm</code>). The values of these arguments are not required to be surrounded by quotes; both <code>"Date"</code> and <code>Date</code> will provide the appropriate column called “Date”. An example where groupings other than station numbers could be used include certain time periods of a study for a single station (before, during, and after watershed experiment treatments or before and after the construction of a dam, appropriately identified in a column). The following is an example of an appropriate data frame with default column names (STATION_NUMBER not required):</p>
<pre><code>  STATION_NUMBER       Date Value
1        08NM116 1949-04-01  1.13
2        08NM116 1949-04-02  1.53
3        08NM116 1949-04-03  2.07
4        08NM116 1949-04-04  2.07
5        08NM116 1949-04-05  2.21
6        08NM116 1949-04-06  2.21</code></pre>
<p>The following is an example <code>fasstr</code> function arguments if your daily data data frame has the default columns names (no need to list them):</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/calc_longterm_daily_stats.html">calc_longterm_daily_stats</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">flow_data</span><span class="op">)</span></code></pre></div>
<p>The following is an example if your daily data data frame has non-default columns names of “Stations”, “Dates”, and “Flows”:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/calc_longterm_daily_stats.html">calc_longterm_daily_stats</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">flow_data</span>,
                          dates <span class="op">=</span> <span class="va">Dates</span>,
                          values <span class="op">=</span> <span class="va">Flows</span>,
                          groups <span class="op">=</span> <span class="va">Stations</span><span class="op">)</span></code></pre></div>
<p>The <code>data</code> argument is listed first in the list of arguments for each function, so flow data frames can be passed onto <code>fasstr</code> functions using the pipe operator, <code><a href="https://rdrr.io/pkg/magrittr/man/pipe.html">%&gt;%</a></code>, without listing the data frame in a tidy workflow.</p>
</div>
<div id="station_number" class="section level3">
<h3 class="hasAnchor">
<a href="#station_number" class="anchor"></a><code>station_number</code>
</h3>
<p>Alternatively, you can directly extract flow data directly from a HYDAT database by listing station numbers in the <code>station_number</code> argument while leaving the data arguments blank. Data frames from HYDAT also include ‘Parameter’ and ‘Symbol’ columns. The following is an example of listing stations:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/calc_longterm_daily_stats.html">calc_longterm_daily_stats</a></span><span class="op">(</span>station_number <span class="op">=</span> <span class="st">"08NM116"</span><span class="op">)</span>
<span class="fu"><a href="../reference/calc_longterm_daily_stats.html">calc_longterm_daily_stats</a></span><span class="op">(</span>station_number <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"08NM116"</span>, <span class="st">"08NM242"</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<p>This package allows for multiple stations (or other groupings) to be analyzed in many of the functions; provided they are identified using the <code>groups</code> column argument (defaults to STATION_NUMBER). If named grouping column doesn’t exist or is improperly named then all values listed in the <code>values</code> column will be summarized.</p>
<hr>
</div>
</div>
<div id="function-types-and-outputs" class="section level2">
<h2 class="hasAnchor">
<a href="#function-types-and-outputs" class="anchor"></a>3. Function Types and Outputs</h2>
<p><code>fasstr</code> provides various functions to help in streamflow analyses. They can be generally categorized into the following groups (with more details in the sections below):</p>
<ul>
<li>data tidying (to prepare data for analyses; <code>add_*</code> and <code>fill_*</code> functions),</li>
<li>data screening (to look for outliers and missing data; <code>screen_*</code> functions),</li>
<li>calculating summary statistics (long-term, annual, monthly and daily statistics; <code>calc_*</code>functions),</li>
<li>computing analyses (volume frequency analyses and trending; <code>compute_*</code> functions),</li>
<li>visualizing data (plotting the various statistics; <code>plot_*</code> functions), and</li>
<li>writing data (to save your data and plots; <code>write_*</code> functions)</li>
</ul>
<div id="tibble-data-frames" class="section level3">
<h3 class="hasAnchor">
<a href="#tibble-data-frames" class="anchor"></a>Tibble Data Frames</h3>
<p>Functions that produce tables create them as tibble data frames. To facilitate the writing of the <code>fasstr</code> tibbles to a directory as .csv, .xls, or .xlsx files with some functionality of rounding digits, the <code><a href="../reference/write_results.html">write_results()</a></code> function can be used (see section 9 for more information).</p>
</div>
<div id="ggplot2-plots" class="section level3">
<h3 class="hasAnchor">
<a href="#ggplot2-plots" class="anchor"></a><code>ggplot2</code> Plots</h3>
<p>Functions that produce plots create them as lists of <code>ggplot2</code> objects. The use of <code>ggplot2</code> plots allows for further customization of plots for the user (axis titles, colours, etc.). All plotting functions produce lists to be consistent with table naming conventions of <code>fasstr</code>, allow multiple plots to be created with one function, and to easily allow the saving of multiple plots to a directory. To assist with the saving of lists of plots, a provided function called <code><a href="../reference/write_plots.html">write_plots()</a></code> will directly save the list of plots within a directory or single PDF document, with the <code>fasstr</code> plot objects names (see section 9 for more information). Individual plots can be subsetted from their lists using either the dollar sign, $ (e.g. <code>one_plot &lt;- plots$plotname</code>), or double square brackets, [ ] (e.g. <code>one_plot &lt;- plots[[plotname]]</code> or <code>one_plot &lt;- plots[[1]]</code>).</p>
<p>Some functions produce both tibbles and plots as lists and can be subsequently subsetted as desired.</p>
<hr>
</div>
</div>
<div id="data-tidying-functions" class="section level2">
<h2 class="hasAnchor">
<a href="#data-tidying-functions" class="anchor"></a>4. Data Tidying Functions</h2>
<p>There are several functions that are used to prepare your flow data set for your own analysis. These functions begin with <code>add_</code> or <code>fill_</code> and add columns or rows, respectively, to your flow data frame. These functions include:</p>
<ul>
<li>
<code><a href="../reference/fill_missing_dates.html">fill_missing_dates()</a></code> - fills in missing dates or dates with no flow values with NA</li>
<li>
<code><a href="../reference/add_date_variables.html">add_date_variables()</a></code> - add year, month, and day of year variables (and water years if selected)</li>
<li>
<code><a href="../reference/add_seasons.html">add_seasons()</a></code> - add a column of seasons</li>
<li>
<code><a href="../reference/add_rolling_means.html">add_rolling_means()</a></code> - add rolling n-day averages (e.g. 7-day rolling average)</li>
<li>
<code><a href="../reference/add_basin_area.html">add_basin_area()</a></code> - add a basin area column to daily flows</li>
<li>
<code><a href="../reference/add_daily_volume.html">add_daily_volume()</a></code> - add daily volumetric flows (in cubic metres)</li>
<li>
<code><a href="../reference/add_daily_yield.html">add_daily_yield()</a></code> - add daily water yields (in millimetres)</li>
<li>
<code><a href="../reference/add_cumulative_volume.html">add_cumulative_volume()</a></code> - add daily cumulative volumetric flows on an annual basis (in cubic metres)</li>
<li>
<code><a href="../reference/add_cumulative_yield.html">add_cumulative_yield()</a></code> - add daily cumulative water yields on an annual basis (in millimetres)</li>
</ul>
<p>The functions are set up to easily incorporate the use of the pipe operator:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/fill_missing_dates.html">fill_missing_dates</a></span><span class="op">(</span>station_number <span class="op">=</span> <span class="st">"08HA011"</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">Date</span>, <span class="va">Value</span><span class="op">)</span> <span class="op">%&gt;%</span>  <span class="co"># keeps just the Date and Value columns</span>
  <span class="fu"><a href="../reference/add_date_variables.html">add_date_variables</a></span><span class="op">(</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="../reference/add_rolling_means.html">add_rolling_means</a></span><span class="op">(</span>roll_days <span class="op">=</span> <span class="fl">7</span><span class="op">)</span></code></pre></div>
<pre><code># A tibble: 21,915 x 8
   Date       Value CalendarYear Month MonthName WaterYear DayofYear Q7Day
   &lt;date&gt;     &lt;dbl&gt;        &lt;dbl&gt; &lt;dbl&gt; &lt;fct&gt;         &lt;dbl&gt;     &lt;dbl&gt; &lt;dbl&gt;
 1 1960-01-01  62.9         1960     1 Jan            1960         1  NA  
 2 1960-01-02  58           1960     1 Jan            1960         2  NA  
 3 1960-01-03  54.9         1960     1 Jan            1960         3  NA  
 4 1960-01-04  51.3         1960     1 Jan            1960         4  NA  
 5 1960-01-05  47.3         1960     1 Jan            1960         5  NA  
 6 1960-01-06  46.7         1960     1 Jan            1960         6  NA  
 7 1960-01-07  43.9         1960     1 Jan            1960         7  52.1
 8 1960-01-08  41.9         1960     1 Jan            1960         8  49.1
 9 1960-01-09  40.8         1960     1 Jan            1960         9  46.7
10 1960-01-10  38.5         1960     1 Jan            1960        10  44.3
# ... with 21,905 more rows</code></pre>
<div id="filling-missing-dates" class="section level3">
<h3 class="hasAnchor">
<a href="#filling-missing-dates" class="anchor"></a>Filling missing dates</h3>
<p>To ensure that analyses do not skip over dates, the <code><a href="../reference/fill_missing_dates.html">fill_missing_dates()</a></code> function looks for gaps in dates and adds the dates and fills in the flow values with <code>NA</code>. It does not do any gap filling (linear or correlations, for example), it assigns missing flow values with <code>NA</code>. It also fills dates to create complete start and end years. For example, if data starts in April, all flow values starting from January will be filled with <code>NA</code>. The timing of the year depends on the <code>water_year_start</code> argument. When <code>water_year_start</code> is left blank, it will fill to complete calendar years (Jan-Dec). If <code>water_year_start</code> is set to another month (numeric) then it will fill to complete water years of the desired year.</p>
<p>Run and compare the following lines to see how missing dates are filled:</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Very gappy (early years):</span>
<span class="fu">tidyhydat</span><span class="fu">::</span><span class="fu"><a href="https://docs.ropensci.org/tidyhydat/reference/hy_daily_flows.html">hy_daily_flows</a></span><span class="op">(</span>station_number <span class="op">=</span> <span class="st">"08NM116"</span><span class="op">)</span>

<span class="co"># Gap filled with NA's</span>
<span class="fu">tidyhydat</span><span class="fu">::</span><span class="fu"><a href="https://docs.ropensci.org/tidyhydat/reference/hy_daily_flows.html">hy_daily_flows</a></span><span class="op">(</span>station_number <span class="op">=</span> <span class="st">"08NM116"</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="../reference/fill_missing_dates.html">fill_missing_dates</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<p>It is ideal to fill missing dates before using other <code>add_*</code> functions so dates added are not missing the other new date values.</p>
</div>
<div id="adding-date-variables-and-seasons" class="section level3">
<h3 class="hasAnchor">
<a href="#adding-date-variables-and-seasons" class="anchor"></a>Adding date variables and seasons</h3>
<p>The <code><a href="../reference/add_date_variables.html">add_date_variables()</a></code> function adds useful dates columns for summarizing data. The function defaults include ‘CalendarYear’, ‘Month’ (numeric), ‘MonthName’ (month abbreviation; e.g. Jan), ‘WaterYear’ (year based on selected <code>water_year_start</code>), and ‘DayofYear’ (the day of year based on selected <code>water_year_start</code> from 1-365). The month of the start of the water year is chosen using the <code>water_year_start</code> argument, which defaults to “1” for January.</p>
<p>Run and compare the following lines to see how the date columns are added:</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Just calendar year info</span>
<span class="fu"><a href="../reference/add_date_variables.html">add_date_variables</a></span><span class="op">(</span>station_number <span class="op">=</span> <span class="st">"08NM116"</span><span class="op">)</span>

<span class="co"># If water years are required starting August (use month number)</span>
<span class="fu"><a href="../reference/add_date_variables.html">add_date_variables</a></span><span class="op">(</span>station_number <span class="op">=</span> <span class="st">"08NM116"</span>, 
                   water_year_start <span class="op">=</span> <span class="fl">8</span><span class="op">)</span></code></pre></div>
<p>The <code><a href="../reference/add_seasons.html">add_seasons()</a></code> function adds a column of seasons identifiers called “Season”. The length of seasons, in months, is provided using the <code>seasons_length</code> argument. As seasons are grouped by months the length of the seasons must be divisible into 12 with season lengths of 1, 2, 3, 4, 6, or 12 months. The start of the first season coincides with the start month of each year; ‘Jan-Jun’ for 6-month seasons starting with calendar years or ‘Dec-Feb’ for 3-month seasons starting with water year starting in December. Run and compare the following lines to see how seasons columns are added:</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co">#  2 seasons starting January</span>
<span class="fu"><a href="../reference/add_seasons.html">add_seasons</a></span><span class="op">(</span>station_number <span class="op">=</span> <span class="st">"08NM116"</span>,
            seasons_length <span class="op">=</span> <span class="fl">6</span><span class="op">)</span>

<span class="co">#  4 seasons starting October</span>
<span class="fu"><a href="../reference/add_seasons.html">add_seasons</a></span><span class="op">(</span>station_number <span class="op">=</span> <span class="st">"08NM116"</span>, 
            water_year_start <span class="op">=</span> <span class="fl">10</span>,
            seasons_length <span class="op">=</span> <span class="fl">3</span><span class="op">)</span>

<span class="co">#  4 Seasons starting December</span>
<span class="fu"><a href="../reference/add_seasons.html">add_seasons</a></span><span class="op">(</span>station_number <span class="op">=</span> <span class="st">"08NM116"</span>, 
            water_year_start <span class="op">=</span> <span class="fl">12</span>,
            seasons_length <span class="op">=</span> <span class="fl">3</span><span class="op">)</span></code></pre></div>
</div>
<div id="adding-rolling-means" class="section level3">
<h3 class="hasAnchor">
<a href="#adding-rolling-means" class="anchor"></a>Adding rolling means</h3>
<p>Adding rolling means (running means or averages) of daily data, can be done using the <code><a href="../reference/add_rolling_means.html">add_rolling_means()</a></code> functions. Based on the selected “n” rolling days using the <code>roll_days</code> argument, a column for each “n” will be added. One rolling mean column can be added by listing one number (e.g. <code>roll_days = 7</code>) or multiple columns can be added by listing each one (e.g. <code>roll_days = c(3,7,30)</code>). Each column will be named “Q’n’Day” where n is the number (e.g. Q7Day or Q30Day).</p>
<p>Where the alignment of the rolling mean is compared to the date is important to know when analyzing data. The alignment, using the <code>roll_align</code> argument, determine the date at which the rolling means occur.</p>
<ul>
<li>
<code>roll_align = "right"</code> - the date will have the mean of that date’s flow value and the previous n-1 days</li>
<li>
<code>roll_align = "left"</code> - the date will have the mean of that date’s flow value and the next n-1 days</li>
<li>
<code>roll_align = "center"</code>
<ul>
<li>odd numbered <code>roll_days</code> - date will have the mean of that date’s flow value and half of n-1 days before and half of n-1 days after</li>
<li>even numbered <code>roll_days</code> - date will have the mean of that date’s flow and half of n days after, and the remaining before ((n/2)-1 days before the date) (i.e. the first of the middle two dates)</li>
</ul>
</li>
</ul>
<p>Odd roll_days example (column headers have alignment direction added):</p>
<pre><code># A tibble: 6 x 5
  Date       Value Q5Day_left Q5Day_center Q5Day_right
  &lt;date&gt;     &lt;dbl&gt;      &lt;dbl&gt;        &lt;dbl&gt;       &lt;dbl&gt;
1 1960-01-01  62.9       54.9         NA          NA  
2 1960-01-02  58         51.6         NA          NA  
3 1960-01-03  54.9       48.8         54.9        NA  
4 1960-01-04  51.3       46.2         51.6        NA  
5 1960-01-05  47.3       44.1         48.8        54.9
6 1960-01-06  46.7       42.4         46.2        51.6</code></pre>
<p>Even roll_days example:</p>
<pre><code># A tibble: 6 x 5
  Date       Value Q6Day_left Q6Day_center Q6Day_right
  &lt;date&gt;     &lt;dbl&gt;      &lt;dbl&gt;        &lt;dbl&gt;       &lt;dbl&gt;
1 1960-01-01  62.9       53.5         NA          NA  
2 1960-01-02  58         50.4         NA          NA  
3 1960-01-03  54.9       47.7         53.5        NA  
4 1960-01-04  51.3       45.3         50.4        NA  
5 1960-01-05  47.3       43.2         47.7        NA  
6 1960-01-06  46.7       41.5         45.3        53.5</code></pre>
</div>
<div id="adding-basin-areas" class="section level3">
<h3 class="hasAnchor">
<a href="#adding-basin-areas" class="anchor"></a>Adding basin areas</h3>
<p>To add a column of basin areas, for viewing or analyzing, the <code><a href="../reference/add_basin_area.html">add_basin_area()</a></code> function can be used. The basin area will be extracted from HYDAT, if available, under two conditions where the <code>basin_area</code> argument can be left blank:</p>
<ul>
<li>if the <code>station_number</code> argument is used</li>
<li>if your <code>data</code> data frame has a grouping column consisting of HYDAT station numbers</li>
</ul>
<p>If you would like to apply your own basin area size(s) or override the HYDAT areas, you use the <code>basin_area</code> argument in the following ways:</p>
<ul>
<li>for a single station or applying to all stations, list a single number (i.e. <code>basin_area = 800</code>)</li>
<li>for different areas for multiple stations, you list each basin area for each station (i.e. <code>basin_area = c("08NM116" = 800, "08NM242" = 4)</code>)</li>
</ul>
<p>Run and compare the following lines to see how basin area columns are added:</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Using the station_number argument or data frame as HYDAT groupings</span>
<span class="fu"><a href="../reference/add_basin_area.html">add_basin_area</a></span><span class="op">(</span>station_number <span class="op">=</span> <span class="st">"08NM116"</span><span class="op">)</span>

<span class="co"># Using the basin_area argument</span>
<span class="fu"><a href="../reference/add_basin_area.html">add_basin_area</a></span><span class="op">(</span>station_number <span class="op">=</span> <span class="st">"08NM116"</span>, 
               basin_area <span class="op">=</span> <span class="fl">800</span><span class="op">)</span>

<span class="co"># Using the basin_area argument with multiple stations</span>
<span class="fu"><a href="../reference/add_basin_area.html">add_basin_area</a></span><span class="op">(</span>station_number <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"08NM116"</span>,<span class="st">"08NM242"</span><span class="op">)</span>, 
               basin_area <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"08NM116"</span> <span class="op">=</span> <span class="fl">800</span>, <span class="st">"08NM242"</span> <span class="op">=</span> <span class="fl">4</span><span class="op">)</span><span class="op">)</span></code></pre></div>
</div>
<div id="adding-daily-volumetric-discharge-or-water-yields" class="section level3">
<h3 class="hasAnchor">
<a href="#adding-daily-volumetric-discharge-or-water-yields" class="anchor"></a>Adding daily volumetric discharge or water yields</h3>
<p>Converting daily mean discharge into other units can be useful for different analyses. Columns of total daily discharge converted from daily mean into volumetric flows, named “Volume_m3” in cubic metres per second, or area-based water yields, named “Yield_mm” in millimetres, can be used using the <code><a href="../reference/add_daily_volume.html">add_daily_volume()</a></code> and <code><a href="../reference/add_daily_yield.html">add_daily_yield()</a></code> functions, respectively. Volumetric gives the total volume per day, and the water yield gives the total water depth, provided an upstream drainage basin area is provided. Basin area can be provided using the <code>basin_area</code> argument, or if there is a <code>groups</code> column of HYDAT station numbers in your data then it will automatically be extracted from HYDAT, if available. (see `adding basin areas above or section 8 for more information).</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Add a column of converted discharge (m3/s) into volume (m3)</span>
<span class="fu"><a href="../reference/add_daily_volume.html">add_daily_volume</a></span><span class="op">(</span>station_number <span class="op">=</span> <span class="st">"08NM116"</span><span class="op">)</span>    

<span class="co"># Add a column of converted discharge (m3/s) into yield (mm), with HYDAT station groups</span>
<span class="fu"><a href="../reference/add_daily_yield.html">add_daily_yield</a></span><span class="op">(</span>station_number <span class="op">=</span> <span class="st">"08NM116"</span><span class="op">)</span>   

<span class="co"># Add a column of converted discharge (m3/s) into yield (mm), with setting the basin area</span>
<span class="fu"><a href="../reference/add_daily_yield.html">add_daily_yield</a></span><span class="op">(</span>station_number <span class="op">=</span> <span class="st">"08NM116"</span>, 
                basin_area <span class="op">=</span> <span class="fl">800</span><span class="op">)</span>   </code></pre></div>
</div>
<div id="adding-annual-cumulative-daily-volumetric-flows-or-water-yields" class="section level3">
<h3 class="hasAnchor">
<a href="#adding-annual-cumulative-daily-volumetric-flows-or-water-yields" class="anchor"></a>Adding annual cumulative daily volumetric flows or water yields</h3>
<p>These functions create a rolling cumulative of daily total flows on an annual basis, as volumetric flows, named “Cumul_Volume_m3” in cubic metres per second, or area-based water yields, named “Cumul_Yield_mm” in millimetres. A total flow for a given a day is the sum of all previous days and that day, within a given year (Jan 15 cumulative flow value is the sum of all total flows from Jan 1-15). It restarts for each year (based on the starting month) and no values for a year are calculated if there is missing data for a given year as the total for a given year cannot be determined.</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Add a column of cumulative volumes (m3)</span>
<span class="fu"><a href="../reference/add_cumulative_volume.html">add_cumulative_volume</a></span><span class="op">(</span>station_number <span class="op">=</span> <span class="st">"08NM116"</span><span class="op">)</span> 

<span class="co"># Add a column of cumulative yield (mm), with HYDAT station number groups</span>
<span class="fu"><a href="../reference/add_cumulative_yield.html">add_cumulative_yield</a></span><span class="op">(</span>station_number <span class="op">=</span> <span class="st">"08NM116"</span><span class="op">)</span>   

<span class="co"># Add a column of cumulative yield (mm), with setting the basin area</span>
<span class="fu"><a href="../reference/add_cumulative_yield.html">add_cumulative_yield</a></span><span class="op">(</span>station_number <span class="op">=</span> <span class="st">"08NM116"</span>, 
                     basin_area <span class="op">=</span> <span class="fl">800</span><span class="op">)</span>  </code></pre></div>
</div>
<div id="pipelines" class="section level3">
<h3 class="hasAnchor">
<a href="#pipelines" class="anchor"></a>Pipelines</h3>
<p>By utilizing the <code>data</code> argument as the first one list, it enables the user to work with the tidying functions within a tidy ‘pipeline’ and can pass onto the other <code>fasstr</code> functions.</p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/fill_missing_dates.html">fill_missing_dates</a></span><span class="op">(</span>station_number <span class="op">=</span> <span class="st">"08NM116"</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="../reference/add_date_variables.html">add_date_variables</a></span><span class="op">(</span>water_year_start <span class="op">=</span> <span class="fl">9</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="../reference/add_seasons.html">add_seasons</a></span><span class="op">(</span>seasons_length <span class="op">=</span> <span class="fl">3</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="../reference/add_rolling_means.html">add_rolling_means</a></span><span class="op">(</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="../reference/add_basin_area.html">add_basin_area</a></span><span class="op">(</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="../reference/add_daily_volume.html">add_daily_volume</a></span><span class="op">(</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="../reference/add_daily_yield.html">add_daily_yield</a></span><span class="op">(</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="../reference/add_cumulative_volume.html">add_cumulative_volume</a></span><span class="op">(</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="../reference/add_cumulative_yield.html">add_cumulative_yield</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<pre><code># A tibble: 25,202 x 19
   STATION_NUMBER Date       Parameter Value Symbol CalendarYear Month MonthName
   &lt;chr&gt;          &lt;date&gt;     &lt;chr&gt;     &lt;dbl&gt; &lt;chr&gt;         &lt;dbl&gt; &lt;dbl&gt; &lt;fct&gt;    
 1 08NM116        1949-01-01 Flow         NA &lt;NA&gt;           1949     1 Jan      
 2 08NM116        1949-01-02 Flow         NA &lt;NA&gt;           1949     1 Jan      
 3 08NM116        1949-01-03 Flow         NA &lt;NA&gt;           1949     1 Jan      
 4 08NM116        1949-01-04 Flow         NA &lt;NA&gt;           1949     1 Jan      
 5 08NM116        1949-01-05 Flow         NA &lt;NA&gt;           1949     1 Jan      
 6 08NM116        1949-01-06 Flow         NA &lt;NA&gt;           1949     1 Jan      
 7 08NM116        1949-01-07 Flow         NA &lt;NA&gt;           1949     1 Jan      
 8 08NM116        1949-01-08 Flow         NA &lt;NA&gt;           1949     1 Jan      
 9 08NM116        1949-01-09 Flow         NA &lt;NA&gt;           1949     1 Jan      
10 08NM116        1949-01-10 Flow         NA &lt;NA&gt;           1949     1 Jan      
# ... with 25,192 more rows, and 11 more variables: WaterYear &lt;dbl&gt;,
#   DayofYear &lt;dbl&gt;, Season &lt;fct&gt;, Q3Day &lt;dbl&gt;, Q7Day &lt;dbl&gt;, Q30Day &lt;dbl&gt;,
#   Basin_Area_sqkm &lt;dbl&gt;, Volume_m3 &lt;dbl&gt;, Yield_mm &lt;dbl&gt;,
#   Cumul_Volume_m3 &lt;dbl&gt;, Cumul_Yield_mm &lt;dbl&gt;</code></pre>
<hr>
</div>
</div>
<div id="data-screening-functions" class="section level2">
<h2 class="hasAnchor">
<a href="#data-screening-functions" class="anchor"></a>5. Data Screening Functions</h2>
<p>If you are looking at some data for the first time, it may be useful to explore the data quality and availability. The following functions will help to explore the data:</p>
<ul>
<li>
<code><a href="../reference/plot_flow_data.html">plot_flow_data()</a></code> - plot daily mean streamflow</li>
<li>
<code><a href="../reference/screen_flow_data.html">screen_flow_data()</a></code> - calculate annual summary and identify missing data</li>
<li>
<code><a href="../reference/plot_data_screening.html">plot_data_screening()</a></code> - plot annual summary statistics for data screening</li>
<li>
<code><a href="../reference/plot_missing_dates.html">plot_missing_dates()</a></code> - plot annual and monthly missing dates</li>
</ul>
<p>To view the entire daily flow data set to view for gaps and outliers, or changes in flow over time, the <code><a href="../reference/plot_flow_data.html">plot_flow_data()</a></code> function will plot all daily data in the data frame. The plot can be filtered by years and dates.</p>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/plot_flow_data.html">plot_flow_data</a></span><span class="op">(</span>station_number <span class="op">=</span> <span class="st">"08NM116"</span><span class="op">)</span> </code></pre></div>
<pre><code>$Daily_Flows</code></pre>
<p><img src="fasstr_users_guide_files/figure-html/unnamed-chunk-18-1.png" width="672"></p>
<p>When plotting multiple stations, they automatically produce a separate plot for each station. However, setting <code>one_plot = TRUE</code> will plot all stations on the same plot.</p>
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/plot_flow_data.html">plot_flow_data</a></span><span class="op">(</span>station_number <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"08NM241"</span>, <span class="st">"08NM242"</span><span class="op">)</span>,
               one_plot <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> </code></pre></div>
<pre><code>$Daily_Flows</code></pre>
<p><img src="fasstr_users_guide_files/figure-html/unnamed-chunk-19-1.png" width="672"></p>
<p>The <code><a href="../reference/screen_flow_data.html">screen_flow_data()</a></code> function provides an overview of the number of flow values per year and each month per year, along with annual minimums, maximums, means, and standard deviations to inspect for outliers in the data.</p>
<div class="sourceCode" id="cb26"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/screen_flow_data.html">screen_flow_data</a></span><span class="op">(</span>station_number <span class="op">=</span> <span class="st">"08NM116"</span><span class="op">)</span></code></pre></div>
<pre><code># A tibble: 69 x 22
   STATION_NUMBER  Year n_days   n_Q n_missing_Q Minimum Maximum  Mean Median
   &lt;chr&gt;          &lt;dbl&gt;  &lt;int&gt; &lt;int&gt;       &lt;int&gt;   &lt;dbl&gt;   &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt;
 1 08NM116         1949    365   183         182   0.623    49.3  7.77   2.27
 2 08NM116         1950    365   183         182   0.623    52.1  7.76   2.07
 3 08NM116         1951    365   183         182   0.623    49.3  8.99   3.71
 4 08NM116         1952    366   183         183   0.850    50.7 10.3    3.17
 5 08NM116         1953    365   183         182   0.340    62.3  8.30   4.56
 6 08NM116         1954    365   183         182   0.566    36.2 11.3    5.38
 7 08NM116         1955    365   160         205   0.396    34    8.97   4.02
 8 08NM116         1956    366   176         190   0.719    38.5  9.04   3.97
 9 08NM116         1957    365   170         195   0.680    42.5  8.88   2.44
10 08NM116         1958    365   183         182   0.311    34    6.98   2.32
# ... with 59 more rows, and 13 more variables: StandardDeviation &lt;dbl&gt;,
#   Jan_missing_Q &lt;int&gt;, Feb_missing_Q &lt;int&gt;, Mar_missing_Q &lt;int&gt;,
#   Apr_missing_Q &lt;int&gt;, May_missing_Q &lt;int&gt;, Jun_missing_Q &lt;int&gt;,
#   Jul_missing_Q &lt;int&gt;, Aug_missing_Q &lt;int&gt;, Sep_missing_Q &lt;int&gt;,
#   Oct_missing_Q &lt;int&gt;, Nov_missing_Q &lt;int&gt;, Dec_missing_Q &lt;int&gt;</code></pre>
<p>To view the summary data in the <code><a href="../reference/screen_flow_data.html">screen_flow_data()</a></code> function, the <code><a href="../reference/plot_data_screening.html">plot_data_screening()</a></code> function will plot the annual minimums, maximums, means, and standard deviations.</p>
<div class="sourceCode" id="cb28"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/plot_data_screening.html">plot_data_screening</a></span><span class="op">(</span>station_number <span class="op">=</span> <span class="st">"08NM116"</span><span class="op">)</span> </code></pre></div>
<pre><code>$Data_Screening</code></pre>
<p><img src="fasstr_users_guide_files/figure-html/unnamed-chunk-21-1.png" width="672"></p>
<p>Use the <code><a href="../reference/plot_missing_dates.html">plot_missing_dates()</a></code> function to plot out the missing dates for each month of each year to view for data availability and gaps.</p>
<div class="sourceCode" id="cb30"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/plot_missing_dates.html">plot_missing_dates</a></span><span class="op">(</span>station_number <span class="op">=</span> <span class="st">"08NM116"</span><span class="op">)</span> </code></pre></div>
<pre><code>$Missing_Dates</code></pre>
<p><img src="fasstr_users_guide_files/figure-html/unnamed-chunk-22-1.png" width="672"></p>
<hr>
</div>
<div id="functions-for-calculating-statistics" class="section level2">
<h2 class="hasAnchor">
<a href="#functions-for-calculating-statistics" class="anchor"></a>6. Functions for Calculating Statistics</h2>
<p>The majority of the <code>fasstr</code> functions produce statistics over a certain time period, either long-term, annually, monthly, or daily. These statistics are produced using the <code>calc_*</code> functions and can be visualized using their corresponding <code>plot_*</code> functions. The following sections are an overview of these functions.</p>
<div id="basic-summary-statistics" class="section level3">
<h3 class="hasAnchor">
<a href="#basic-summary-statistics" class="anchor"></a>Basic Summary Statistics</h3>
<p>These functions calculate the means, medians, maximums, minimums, and percentiles (choose using the <code>percentiles</code> argument) of a flow data set:</p>
<ul>
<li>
<code><a href="../reference/calc_longterm_daily_stats.html">calc_longterm_daily_stats()</a></code> - calculate the long-term and long-term monthly summary statistics based on daily mean flows</li>
<li>
<code><a href="../reference/calc_longterm_monthly_stats.html">calc_longterm_monthly_stats()</a></code> - calculate the long-term annual and monthly summary statistics based on monthly mean flows</li>
<li>
<code><a href="../reference/calc_annual_stats.html">calc_annual_stats()</a></code> - calculate annual summary statistics</li>
<li>
<code><a href="../reference/calc_monthly_stats.html">calc_monthly_stats()</a></code> - calculate annual monthly summary statistics</li>
<li>
<code><a href="../reference/calc_daily_stats.html">calc_daily_stats()</a></code> - calculate daily summary statistics</li>
</ul>
<p>These basic statistics can also be viewed using their corresponding plotting functions:</p>
<ul>
<li>
<code><a href="../reference/plot_longterm_daily_stats.html">plot_longterm_daily_stats()</a></code> - plot the long-term monthly summary statistics based on daily mean flows</li>
<li>
<code><a href="../reference/plot_longterm_monthly_stats.html">plot_longterm_monthly_stats()</a></code> - plot the long-term monthly summary statistics based on annual monthly mean flows</li>
<li>
<code><a href="../reference/plot_annual_stats.html">plot_annual_stats()</a></code> - plot annual summary statistics</li>
<li>
<code><a href="../reference/plot_monthly_stats.html">plot_monthly_stats()</a></code> - plot annual monthly summary statistics</li>
<li>
<code><a href="../reference/plot_daily_stats.html">plot_daily_stats()</a></code> - plot daily summary statistics</li>
</ul>
<p>This function produced flow duration curves:</p>
<ul>
<li>
<code><a href="../reference/plot_flow_duration.html">plot_flow_duration()</a></code> - plot flow duration curves</li>
</ul>
<p>These other long-term functions summarize the data over the entire record:</p>
<ul>
<li>
<code><a href="../reference/calc_longterm_mean.html">calc_longterm_mean()</a></code> - calculate the long-term mean annual discharge</li>
<li>
<code><a href="../reference/calc_longterm_percentile.html">calc_longterm_percentile()</a></code> - calculate the long-term percentiles</li>
<li>
<code><a href="../reference/calc_flow_percentile.html">calc_flow_percentile()</a></code> - calculate the percentile rank of a flow value</li>
</ul>
<div id="basic-long-term-statistics" class="section level4">
<h4 class="hasAnchor">
<a href="#basic-long-term-statistics" class="anchor"></a>Basic long-term statistics</h4>
<p>The long-term <code>calc_</code> and <code>plot_</code> functions calculate the long-term and long-term monthly mean, median, maximum, minimum, and percentiles of all daily mean flows.</p>
<p>For <code><a href="../reference/calc_longterm_daily_stats.html">calc_longterm_daily_stats()</a></code>, for a given month, all daily flow values for a given month over the entire record are summarized together. For the ‘Long-term’ category, it summarizes all flow values over the entire record to determine the mean, median, maximum, minimum, and selected percentiles of daily flows. You can also specify a certain period of months to summarize together (ex. Jul-Sep flows) using the <code>custom_months</code> argument (listing the months) and labeling it using the <code>custom_months_label</code> argument (ex. “Summer Flows”).</p>
<div class="sourceCode" id="cb32"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/calc_longterm_daily_stats.html">calc_longterm_daily_stats</a></span><span class="op">(</span>station_number <span class="op">=</span> <span class="st">"08NM116"</span>, 
                          start_year <span class="op">=</span> <span class="fl">1974</span><span class="op">)</span></code></pre></div>
<pre><code># A tibble: 13 x 8
   STATION_NUMBER Month      Mean Median Maximum Minimum    P10   P90
   &lt;chr&gt;          &lt;fct&gt;     &lt;dbl&gt;  &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt;
 1 08NM116        Jan        1.14  0.940    9.5    0.160  0.576  1.78
 2 08NM116        Feb        1.16  0.960    5.81   0.140  0.542  1.95
 3 08NM116        Mar        1.80  1.29    17.5    0.380  0.717  3.55
 4 08NM116        Apr        8.19  5.88    53.5    0.505  1.42  18.0 
 5 08NM116        May       24.4  21.8     80.8    2.55  10.3   40.8 
 6 08NM116        Jun       22.5  20.3     86.2    0.450  6.20  41.1 
 7 08NM116        Jul        6.23  3.94    76.8    0.332  1.18  13.7 
 8 08NM116        Aug        2.18  1.56    22.4    0.427  0.834  4.15
 9 08NM116        Sep        2.30  1.60    17.6    0.364  0.771  4.70
10 08NM116        Oct        2.13  1.65    15.2    0.267  0.844  4.25
11 08NM116        Nov        1.92  1.51    11.7    0.260  0.599  3.75
12 08NM116        Dec        1.26  1.07     7.30   0.244  0.541  2.20
13 08NM116        Long-term  6.28  1.81    86.2    0.140  0.710 20.1 </code></pre>
<p>The <code><a href="../reference/plot_longterm_daily_stats.html">plot_longterm_daily_stats()</a></code> will plot the monthly mean, median, maximum, and minimum values along with selected inner and outer percentiles ribbons on one plot. Change the inner and outer percentile ranges using the <code>inner_percentiles</code> and <code>outer_percentiles</code> arguments, remove the maximum and minimum ribbon using <code>include_extremes = FALSE</code>, or add a specific year using <code>add_year</code>.</p>
<div class="sourceCode" id="cb34"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/plot_longterm_daily_stats.html">plot_longterm_daily_stats</a></span><span class="op">(</span>station_number <span class="op">=</span> <span class="st">"08NM116"</span>, 
                          start_year <span class="op">=</span> <span class="fl">1974</span>,
                          inner_percentiles <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">25</span>,<span class="fl">75</span><span class="op">)</span>,
                          outer_percentiles <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">10</span>,<span class="fl">90</span><span class="op">)</span><span class="op">)</span> </code></pre></div>
<pre><code>$`Long-term_Daily_Statistics`</code></pre>
<p><img src="fasstr_users_guide_files/figure-html/unnamed-chunk-24-1.png" width="672"></p>
<p>Similarly, the <code><a href="../reference/calc_longterm_monthly_stats.html">calc_longterm_monthly_stats()</a></code> functions will calculate the mean, median, maximum, and percentiles of monthly mean flows from all years. Meaning the all daily flows for each month and each year are averaged, and the statistics are based on these annual monthly means. The “Annual” data row summarizes the mean, median, maximum, and percentiles from all annual means.</p>
<div class="sourceCode" id="cb36"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/calc_longterm_monthly_stats.html">calc_longterm_monthly_stats</a></span><span class="op">(</span>station_number <span class="op">=</span> <span class="st">"08NM116"</span>, 
                            start_year <span class="op">=</span> <span class="fl">1974</span><span class="op">)</span></code></pre></div>
<pre><code># A tibble: 13 x 8
   STATION_NUMBER Month   Mean Median Maximum Minimum    P10   P90
   &lt;chr&gt;          &lt;fct&gt;  &lt;dbl&gt;  &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt;
 1 08NM116        Jan     1.14  0.972    6.12   0.316  0.625  1.67
 2 08NM116        Feb     1.16  0.965    3.83   0.353  0.600  1.72
 3 08NM116        Mar     1.80  1.44     6.93   0.507  0.843  2.84
 4 08NM116        Apr     8.19  7.73    23.9    1.60   2.88  13.0 
 5 08NM116        May    24.4  23.8     45.0   14.0   16.1   32.7 
 6 08NM116        Jun    22.5  22.1     48.6    3.15  11.8   35.6 
 7 08NM116        Jul     6.23  4.42    25.6    0.921  1.98  12.9 
 8 08NM116        Aug     2.18  1.76    10.2    0.872  1.13   3.37
 9 08NM116        Sep     2.30  1.72     8.11   0.700  1.01   4.05
10 08NM116        Oct     2.13  1.82     5.66   0.533  1.02   3.66
11 08NM116        Nov     1.92  1.54     5.41   0.498  0.715  3.38
12 08NM116        Dec     1.26  1.10     3.65   0.450  0.548  2.14
13 08NM116        Annual  6.28  6.26    11.1    2.88   4.37   8.36</code></pre>
<p>The corresponding <code><a href="../reference/plot_longterm_monthly_stats.html">plot_longterm_monthly_stats()</a></code> function plots the data, with similar options as <code><a href="../reference/plot_longterm_daily_stats.html">plot_longterm_daily_stats()</a></code>.</p>
<div class="sourceCode" id="cb38"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/plot_longterm_monthly_stats.html">plot_longterm_monthly_stats</a></span><span class="op">(</span>station_number <span class="op">=</span> <span class="st">"08NM116"</span>, 
                            start_year <span class="op">=</span> <span class="fl">1974</span><span class="op">)</span> </code></pre></div>
<pre><code>$`Long-term_Monthly_Statistics`</code></pre>
<p><img src="fasstr_users_guide_files/figure-html/unnamed-chunk-26-1.png" width="672"></p>
</div>
<div id="basic-annual-statistics" class="section level4">
<h4 class="hasAnchor">
<a href="#basic-annual-statistics" class="anchor"></a>Basic annual statistics</h4>
<p>The <code><a href="../reference/calc_annual_stats.html">calc_annual_stats()</a></code> and <code><a href="../reference/plot_annual_stats.html">plot_annual_stats()</a></code> functions calculate the mean, median, maximum, minimum, and percentiles of daily flows for every year of data provided. In calculating, all daily flow values are grouped by year.</p>
<div class="sourceCode" id="cb40"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/calc_annual_stats.html">calc_annual_stats</a></span><span class="op">(</span>station_number <span class="op">=</span> <span class="st">"08NM116"</span>, 
                  start_year <span class="op">=</span> <span class="fl">1974</span><span class="op">)</span></code></pre></div>
<pre><code># A tibble: 44 x 8
   STATION_NUMBER  Year  Mean Median Maximum Minimum   P10   P90
   &lt;chr&gt;          &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
 1 08NM116         1974  8.43   1.34    66     0.447 0.709  33.0
 2 08NM116         1975  5.48   1.54    48.7   0.320 0.580  19.6
 3 08NM116         1976  8.18   3.84    71.1   0.736 0.884  25.6
 4 08NM116         1977  4.38   1.26    36     0.564 0.776  17.2
 5 08NM116         1978  6.75   3.28    44.5   0.532 0.828  19.7
 6 08NM116         1979  4.40   1.56    43     0.411 0.618  15.9
 7 08NM116         1980  5.37   1.88    46.2   0.623 0.793  20.1
 8 08NM116         1981  7.67   2.77    60.6   0.398 1.5    22.3
 9 08NM116         1982  8.46   2.68    54.5   0.815 1.40   30.3
10 08NM116         1983  7.85   3.13    60.2   0.530 1.44   23.5
# ... with 34 more rows</code></pre>
<p>The percentiles in the <code><a href="../reference/plot_annual_stats.html">plot_annual_stats()</a></code> function are fully customizable like the <code>calc_</code> function.</p>
<div class="sourceCode" id="cb42"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/plot_annual_stats.html">plot_annual_stats</a></span><span class="op">(</span>station_number <span class="op">=</span> <span class="st">"08NM116"</span>, 
                  start_year <span class="op">=</span> <span class="fl">1974</span><span class="op">)</span> </code></pre></div>
<pre><code>$Annual_Statistics</code></pre>
<p><img src="fasstr_users_guide_files/figure-html/unnamed-chunk-28-1.png" width="672"></p>
</div>
<div id="basic-monthly-statistics" class="section level4">
<h4 class="hasAnchor">
<a href="#basic-monthly-statistics" class="anchor"></a>Basic monthly statistics</h4>
<p>The <code><a href="../reference/calc_monthly_stats.html">calc_monthly_stats()</a></code> and <code><a href="../reference/plot_monthly_stats.html">plot_monthly_stats()</a></code> functions calculate the mean, median, maximum, minimum, and percentiles of daily flows for each month of each year. In calculating, all daily flow values are grouped by year and month.</p>
<div class="sourceCode" id="cb44"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/calc_monthly_stats.html">calc_monthly_stats</a></span><span class="op">(</span>station_number <span class="op">=</span> <span class="st">"08NM116"</span>, 
                   start_year <span class="op">=</span> <span class="fl">1974</span><span class="op">)</span></code></pre></div>
<pre><code># A tibble: 528 x 9
   STATION_NUMBER  Year Month   Mean Median Maximum Minimum    P10   P90
   &lt;chr&gt;          &lt;dbl&gt; &lt;fct&gt;  &lt;dbl&gt;  &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt;
 1 08NM116         1974 Jan    1.02   1.02     1.26   0.864  0.906  1.12
 2 08NM116         1974 Feb    0.985  0.984    1.06   0.830  0.944  1.04
 3 08NM116         1974 Mar    1.21   1.12     2.14   0.855  0.937  1.97
 4 08NM116         1974 Apr    7.76   4.91    28.3    1.85   1.92  18.7 
 5 08NM116         1974 May   29.8   30.3     50.4   15.9   17.5   43.3 
 6 08NM116         1974 Jun   44.5   44.9     66     20.6   25.6   61.3 
 7 08NM116         1974 Jul    9.97   8.21    24.8    2.42   3.79  20.1 
 8 08NM116         1974 Aug    1.76   1.61     3.71   0.960  1.20   2.28
 9 08NM116         1974 Sep    1.47   1.39     2.10   1.13   1.20   1.78
10 08NM116         1974 Oct    1.23   1.12     2.08   0.838  0.867  1.69
# ... with 518 more rows</code></pre>
<p>The percentiles in the <code><a href="../reference/plot_monthly_stats.html">plot_monthly_stats()</a></code> function are fully customizable like the <code>calc_</code> function. A plot for each different statistic (meana, medians, percentiles, etc.) is created to visualize the monthly patterns over the years.</p>
<div class="sourceCode" id="cb46"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/plot_monthly_stats.html">plot_monthly_stats</a></span><span class="op">(</span>station_number <span class="op">=</span> <span class="st">"08NM116"</span>, 
                   start_year <span class="op">=</span> <span class="fl">1974</span><span class="op">)</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span></code></pre></div>
<pre><code>$Mean_Monthly_Statistics</code></pre>
<p><img src="fasstr_users_guide_files/figure-html/unnamed-chunk-30-1.png" width="672"></p>
</div>
<div id="basic-daily-statistics" class="section level4">
<h4 class="hasAnchor">
<a href="#basic-daily-statistics" class="anchor"></a>Basic daily statistics</h4>
<p>The <code><a href="../reference/calc_daily_stats.html">calc_daily_stats()</a></code> and <code><a href="../reference/plot_daily_stats.html">plot_daily_stats()</a></code> functions calculate the mean, median, maximum, minimum, and percentiles of daily flows for each day of the year. For example, for a given day of year (i.e. day 1 (Jan-01) or day 2 (Jan-02)), all flow values for that day from the entire record are summarized together. Only the first 365 days of each year are summarized (ignores the 366th day from leap years). In calculating, all daily flow values are grouped by day of year.</p>
<div class="sourceCode" id="cb48"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/calc_daily_stats.html">calc_daily_stats</a></span><span class="op">(</span>station_number <span class="op">=</span> <span class="st">"08NM116"</span>, 
                 start_year <span class="op">=</span> <span class="fl">1974</span><span class="op">)</span></code></pre></div>
<pre><code># A tibble: 365 x 11
   STATION_NUMBER Date  DayofYear  Mean Median Minimum Maximum    P5   P25   P75
   &lt;chr&gt;          &lt;chr&gt;     &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
 1 08NM116        Jan-~         1  1.08  0.970   0.328    2.51 0.540 0.692  1.38
 2 08NM116        Jan-~         2  1.05  0.920   0.310    2.26 0.526 0.690  1.35
 3 08NM116        Jan-~         3  1.03  0.897   0.290    2    0.524 0.703  1.22
 4 08NM116        Jan-~         4  1.04  0.903   0.284    2.52 0.505 0.732  1.29
 5 08NM116        Jan-~         5  1.03  0.895   0.302    2.25 0.534 0.709  1.23
 6 08NM116        Jan-~         6  1.03  0.876   0.315    2.32 0.519 0.742  1.30
 7 08NM116        Jan-~         7  1.06  0.905   0.312    2.80 0.493 0.744  1.20
 8 08NM116        Jan-~         8  1.10  0.960   0.314    4    0.514 0.755  1.23
 9 08NM116        Jan-~         9  1.11  0.977   0.327    4.20 0.509 0.740  1.33
10 08NM116        Jan-~        10  1.12  0.947   0.334    4.70 0.450 0.707  1.30
# ... with 355 more rows, and 1 more variable: P95 &lt;dbl&gt;</code></pre>
<p>The plotting daily statistics function will plot the monthly mean, median, maximum, and minimum values along with selected inner and outer percentiles ribbons on one plot. Change the inner and outer percentile ranges using the <code>inner_percentiles</code> and <code>outer_percentiles</code> arguments, remove the maximum and minimum ribbon using <code>include_extremes = FALSE</code>, or add a specific year using <code>add_year</code>.</p>
<div class="sourceCode" id="cb50"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/plot_daily_stats.html">plot_daily_stats</a></span><span class="op">(</span>station_number <span class="op">=</span> <span class="st">"08NM116"</span>, 
                 start_year <span class="op">=</span> <span class="fl">1974</span><span class="op">)</span> </code></pre></div>
<pre><code>$Daily_Statistics</code></pre>
<p><img src="fasstr_users_guide_files/figure-html/unnamed-chunk-32-1.png" width="672"></p>
<div class="sourceCode" id="cb52"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/plot_daily_stats.html">plot_daily_stats</a></span><span class="op">(</span>station_number <span class="op">=</span> <span class="st">"08NM116"</span>, 
                 start_year <span class="op">=</span> <span class="fl">1974</span>,
                 add_year <span class="op">=</span> <span class="fl">2000</span><span class="op">)</span> </code></pre></div>
<pre><code>$Daily_Statistics</code></pre>
<p><img src="fasstr_users_guide_files/figure-html/unnamed-chunk-33-1.png" width="672"></p>
</div>
<div id="flow-duration" class="section level4">
<h4 class="hasAnchor">
<a href="#flow-duration" class="anchor"></a>Flow Duration</h4>
<p>Flow duration curves can be produced using the function, where selected months and time periods can be selected:</p>
<div class="sourceCode" id="cb54"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/plot_flow_duration.html">plot_flow_duration</a></span><span class="op">(</span>station_number <span class="op">=</span> <span class="st">"08NM116"</span>,
                   start_year <span class="op">=</span> <span class="fl">1974</span><span class="op">)</span> </code></pre></div>
<pre><code>$Flow_Duration</code></pre>
<p><img src="fasstr_users_guide_files/figure-html/unnamed-chunk-34-1.png" width="672"></p>
<div class="sourceCode" id="cb56"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/plot_flow_duration.html">plot_flow_duration</a></span><span class="op">(</span>station_number <span class="op">=</span> <span class="st">"08NM116"</span>,
                   start_year <span class="op">=</span> <span class="fl">1974</span>,
                   months <span class="op">=</span> <span class="fl">7</span><span class="op">:</span><span class="fl">9</span>,
                   include_longterm <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span> </code></pre></div>
<pre><code>$Flow_Duration</code></pre>
<p><img src="fasstr_users_guide_files/figure-html/unnamed-chunk-35-1.png" width="672"></p>
</div>
<div id="other-long-term-statistics" class="section level4">
<h4 class="hasAnchor">
<a href="#other-long-term-statistics" class="anchor"></a>Other Long-term Statistics</h4>
<p><code><a href="../reference/calc_longterm_mean.html">calc_longterm_mean()</a></code> calculates the mean of all the daily flows, and specific percents of the long-term mean (using <code>percent_MAD</code> argument). It can also be known as the long-term mean annual discharge, MAD.</p>
<div class="sourceCode" id="cb58"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/calc_longterm_mean.html">calc_longterm_mean</a></span><span class="op">(</span>station_number <span class="op">=</span> <span class="st">"08NM116"</span>, 
                   start_year <span class="op">=</span> <span class="fl">1974</span>,
                   percent_MAD <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">5</span>,<span class="fl">10</span>,<span class="fl">20</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<pre><code># A tibble: 1 x 5
  STATION_NUMBER LTMAD `5%MAD` `10%MAD` `20%MAD`
  &lt;chr&gt;          &lt;dbl&gt;   &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt;
1 08NM116         6.28   0.314    0.628     1.26</code></pre>
<p><code><a href="../reference/calc_longterm_percentile.html">calc_longterm_percentile()</a></code> calculates the selected long-term percentiles of all the daily flow values.</p>
<div class="sourceCode" id="cb60"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/calc_longterm_percentile.html">calc_longterm_percentile</a></span><span class="op">(</span>station_number <span class="op">=</span> <span class="st">"08NM116"</span>,
                         start_year <span class="op">=</span> <span class="fl">1974</span>,
                         percentiles <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">25</span>,<span class="fl">50</span>,<span class="fl">75</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<pre><code># A tibble: 1 x 4
  STATION_NUMBER   P25   P50   P75
  &lt;chr&gt;          &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
1 08NM116         1.03  1.81  5.72</code></pre>
<p><code><a href="../reference/calc_flow_percentile.html">calc_flow_percentile()</a></code> calculates the percentile rank of a specified flow value, provided as <code>flow_value</code>. It compares the flow value to all daily flow values to determines the percentile rank.</p>
<div class="sourceCode" id="cb62"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/calc_flow_percentile.html">calc_flow_percentile</a></span><span class="op">(</span>station_number <span class="op">=</span> <span class="st">"08NM116"</span>, 
                     start_year <span class="op">=</span> <span class="fl">1974</span>,
                     flow_value <span class="op">=</span> <span class="fl">6.270</span><span class="op">)</span></code></pre></div>
<pre><code># A tibble: 1 x 2
  STATION_NUMBER Percentile
  &lt;chr&gt;               &lt;dbl&gt;
1 08NM116              76.3</code></pre>
</div>
<div id="basic-statistics-and-plotting-volumetric-and-yield-flows" class="section level4">
<h4 class="hasAnchor">
<a href="#basic-statistics-and-plotting-volumetric-and-yield-flows" class="anchor"></a>Basic statistics and plotting volumetric and yield flows</h4>
<p>The <code>calc_</code> and <code>plot_</code> functions will summarize any values provided to the functions with the default column being ‘Value’. While for <code>fasstr</code> this defaults to daily mean flows, any daily value can be summarized (water level, precipitation amount, etc.) if the methods of analyses are similar for the parameter type. As there are no units presented in the <code>calc_</code> functions this should not be problem for most calculations. However, the plots come standard with a “Discharge (cms)” y-axis, which can be changed afterwards using <code>ggplot2</code> functions.</p>
<p>To facilitate the plotting of the daily volume or yield statistics from <code>fasstr</code>, after adding them to your flow data using the <code><a href="../reference/add_daily_volume.html">add_daily_volume()</a></code> or <code><a href="../reference/add_daily_yield.html">add_daily_yield()</a></code> functions, by listing the <code>values</code> argument as either ‘Volume_m3’ or ‘Yield_mm’ (from their respective <code>add_*</code> functions), the discharge axis title will adjust accordingly.</p>
<div class="sourceCode" id="cb64"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/add_daily_volume.html">add_daily_volume</a></span><span class="op">(</span>station_number <span class="op">=</span> <span class="st">"08NM116"</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="../reference/plot_annual_stats.html">plot_annual_stats</a></span><span class="op">(</span>values <span class="op">=</span> <span class="st">"Volume_m3"</span>,
                    start_year <span class="op">=</span> <span class="fl">1974</span><span class="op">)</span> </code></pre></div>
<pre><code>$Annual_Statistics</code></pre>
<p><img src="fasstr_users_guide_files/figure-html/unnamed-chunk-39-1.png" width="672"></p>
<div class="sourceCode" id="cb66"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/add_daily_yield.html">add_daily_yield</a></span><span class="op">(</span>station_number <span class="op">=</span> <span class="st">"08NM116"</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="../reference/plot_daily_stats.html">plot_daily_stats</a></span><span class="op">(</span>values <span class="op">=</span> <span class="st">"Yield_mm"</span>,
                   start_year <span class="op">=</span> <span class="fl">1974</span><span class="op">)</span> </code></pre></div>
<pre><code>$Daily_Statistics</code></pre>
<p><img src="fasstr_users_guide_files/figure-html/unnamed-chunk-40-1.png" width="672"></p>
</div>
</div>
<div id="cumulative-flow-statistics" class="section level3">
<h3 class="hasAnchor">
<a href="#cumulative-flow-statistics" class="anchor"></a>Cumulative Flow Statistics</h3>
<p>Total volumetric of runoff yield flows within a given year can provide important hydrological information on a basin-wide scale. These functions calculate the total volume (in cubic metres) or yield (in millimetres; based on basin size) for a flow data set, at the annual, monthly, or daily cumulative scale.</p>
<ul>
<li>
<code><a href="../reference/calc_annual_cumulative_stats.html">calc_annual_cumulative_stats()</a></code> - calculate annual (and seasonal) cumulative flows</li>
<li>
<code><a href="../reference/calc_monthly_cumulative_stats.html">calc_monthly_cumulative_stats()</a></code> - calculate cumulative monthly flow statistics</li>
<li>
<code><a href="../reference/calc_daily_cumulative_stats.html">calc_daily_cumulative_stats()</a></code> - calculate cumulative daily flow statistics</li>
</ul>
<p>These statistics can also be viewed using their corresponding plotting functions:</p>
<ul>
<li>
<code><a href="../reference/plot_annual_cumulative_stats.html">plot_annual_cumulative_stats()</a></code> - plot annual and seasonal total flows</li>
<li>
<code><a href="../reference/plot_monthly_cumulative_stats.html">plot_monthly_cumulative_stats()</a></code> - plot cumulative monthly flow statistics</li>
<li>
<code><a href="../reference/plot_daily_cumulative_stats.html">plot_daily_cumulative_stats()</a></code> - plot cumulative daily flow statistics</li>
</ul>
<p>While these functions default to volumetric flows, using <code>use_yield = TRUE</code> and <code>basin_area</code> arguments will calculate totals in runoff yield. If there is a <code>groups</code> column of HYDAT station numbers, then the function will automatically pull the basin area out of HYDAT if available; otherwise a basin area will be required. Due to the requirements of a complete annual data set to calculate total flows, only years of complete data are used.</p>
<div id="cumulative-annual-statistics" class="section level4">
<h4 class="hasAnchor">
<a href="#cumulative-annual-statistics" class="anchor"></a>Cumulative annual statistics</h4>
<p>The <code><a href="../reference/calc_annual_cumulative_stats.html">calc_annual_cumulative_stats()</a></code> function provides the total annual volume or runoff yield (if <code>use_yield = TRUE</code> is used). It totals all flows for a given year in cubic metres.</p>
<div class="sourceCode" id="cb68"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/calc_annual_cumulative_stats.html">calc_annual_cumulative_stats</a></span><span class="op">(</span>station_number <span class="op">=</span> <span class="st">"08NM116"</span>, start_year <span class="op">=</span> <span class="fl">1974</span><span class="op">)</span></code></pre></div>
<pre><code># A tibble: 44 x 3
   STATION_NUMBER  Year Total_Volume_m3
   &lt;chr&gt;          &lt;dbl&gt;           &lt;dbl&gt;
 1 08NM116         1974      265854182.
 2 08NM116         1975      172900397.
 3 08NM116         1976      258693177.
 4 08NM116         1977      138177100.
 5 08NM116         1978      212792574.
 6 08NM116         1979      138807734.
 7 08NM116         1980      169956317.
 8 08NM116         1981      241854163.
 9 08NM116         1982      266735721.
10 08NM116         1983      247618080.
# ... with 34 more rows</code></pre>
<p>By using the <code>include_seasons = TRUE</code> (logical TRUE/FALSE) argument, total seasonal flows columns will be added to the results. Two columns of two-seasons (2-six months), and four columns of four-seasons (4-three months) will be added. The start month of the first seasons will begin in the first month of the year (ex. Jan for Calendar years or Oct for water years starting in October).</p>
<div class="sourceCode" id="cb70"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/calc_annual_cumulative_stats.html">calc_annual_cumulative_stats</a></span><span class="op">(</span>station_number <span class="op">=</span> <span class="st">"08NM116"</span>, 
                             start_year <span class="op">=</span> <span class="fl">1974</span>,
                             include_seasons <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></code></pre></div>
<pre><code># A tibble: 44 x 9
   STATION_NUMBER  Year Total_Volume_m3 `Jan-Jun_Volume~ `Jul-Dec_Volume~
   &lt;chr&gt;          &lt;dbl&gt;           &lt;dbl&gt;            &lt;dbl&gt;            &lt;dbl&gt;
 1 08NM116         1974      265854182.       223662989.        42191194.
 2 08NM116         1975      172900397.       136045958.        36854438.
 3 08NM116         1976      258693177.       164417817.        94275360.
 4 08NM116         1977      138177100.       115279113.        22897987.
 5 08NM116         1978      212792574.       146659335.        66133239.
 6 08NM116         1979      138807734.       117444383.        21363350.
 7 08NM116         1980      169956317.       131126774.        38829542.
 8 08NM116         1981      241854163.       165675542.        76178621.
 9 08NM116         1982      266735721.       154229097.       112506624.
10 08NM116         1983      247618080.       191691360.        55926720.
# ... with 34 more rows, and 4 more variables: `Jan-Mar_Volume_m3` &lt;dbl&gt;,
#   `Apr-Jun_Volume_m3` &lt;dbl&gt;, `Jul-Sep_Volume_m3` &lt;dbl&gt;,
#   `Oct-Dec_Volume_m3` &lt;dbl&gt;</code></pre>
<p>The total volumes for each year can be plotted using the <code><a href="../reference/plot_annual_cumulative_stats.html">plot_annual_cumulative_stats()</a></code> function. When using <code>include_seasons = TRUE</code> two additional plots will be created, one for two- and four-seasons.</p>
<div class="sourceCode" id="cb72"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/plot_annual_cumulative_stats.html">plot_annual_cumulative_stats</a></span><span class="op">(</span>station_number <span class="op">=</span> <span class="st">"08NM116"</span>, 
                             start_year <span class="op">=</span> <span class="fl">1974</span><span class="op">)</span> </code></pre></div>
<pre><code>$Total_Volume</code></pre>
<p><img src="fasstr_users_guide_files/figure-html/unnamed-chunk-43-1.png" width="672"></p>
</div>
<div id="cumulative-monthly-and-statistics" class="section level4">
<h4 class="hasAnchor">
<a href="#cumulative-monthly-and-statistics" class="anchor"></a>Cumulative monthly and statistics</h4>
<p>The <code><a href="../reference/calc_monthly_cumulative_stats.html">calc_monthly_cumulative_stats()</a></code> and <code><a href="../reference/plot_monthly_cumulative_stats.html">plot_monthly_cumulative_stats()</a></code> functions calculate the mean, median, maximum, minimum, and percentiles of total cumulative monthly flows. For each month of each year, the total volume or runoff yield is determined. Then within a given year, the cumulative total for each month is determined by added all previous months (ex. Jan = Jan total; Feb = Jan+Feb totals, etc.). Then the mean, median, maximum, minimum, and percentiles are calculated based on those monthly cumulative totals for each year. In interpreting the information, if a given total flow is below the mean value, then the cumulative flow is less than average, or less volume has passed through the station than average at that point in time. The percentiles in the <code>calc_</code> function are flexible using the <code>percentiles</code> argument.</p>
<div class="sourceCode" id="cb74"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/calc_monthly_cumulative_stats.html">calc_monthly_cumulative_stats</a></span><span class="op">(</span>station_number <span class="op">=</span> <span class="st">"08NM116"</span>, 
                              start_year <span class="op">=</span> <span class="fl">1974</span><span class="op">)</span></code></pre></div>
<pre><code># A tibble: 12 x 10
   STATION_NUMBER Month   Mean Median Maximum Minimum     P5    P25    P75
   &lt;chr&gt;          &lt;fct&gt;  &lt;dbl&gt;  &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;
 1 08NM116        Jan   3.06e6 2.60e6  1.64e7  8.45e5 1.48e6 1.95e6 3.55e6
 2 08NM116        Feb   5.89e6 4.95e6  2.46e7  1.73e6 2.70e6 3.82e6 6.45e6
 3 08NM116        Mar   1.07e7 8.91e6  3.83e7  3.09e6 4.88e6 6.63e6 1.19e7
 4 08NM116        Apr   3.20e7 2.89e7  7.41e7  9.90e6 1.30e7 2.32e7 3.70e7
 5 08NM116        May   9.72e7 9.15e7  1.60e8  5.03e7 5.46e7 7.76e7 1.13e8
 6 08NM116        Jun   1.56e8 1.56e8  2.55e8  7.62e7 9.41e7 1.26e8 1.85e8
 7 08NM116        Jul   1.72e8 1.77e8  3.02e8  8.14e7 9.96e7 1.30e8 2.06e8
 8 08NM116        Aug   1.78e8 1.81e8  3.12e8  8.50e7 1.03e8 1.34e8 2.19e8
 9 08NM116        Sep   1.84e8 1.87e8  3.24e8  8.68e7 1.05e8 1.40e8 2.28e8
10 08NM116        Oct   1.90e8 1.93e8  3.38e8  8.82e7 1.08e8 1.46e8 2.31e8
11 08NM116        Nov   1.95e8 1.95e8  3.46e8  8.95e7 1.10e8 1.52e8 2.34e8
12 08NM116        Dec   1.98e8 1.97e8  3.51e8  9.07e7 1.12e8 1.55e8 2.39e8
# ... with 1 more variable: P95 &lt;dbl&gt;</code></pre>
<p>The <code><a href="../reference/plot_monthly_cumulative_stats.html">plot_monthly_cumulative_stats()</a></code> function will plot the monthly total mean, median, maximum, and minimum values along with the 5th, 25th, 75th, and 95th percentiles all on one plot. The percentiles are not customizable for this function.</p>
<div class="sourceCode" id="cb76"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/plot_monthly_cumulative_stats.html">plot_monthly_cumulative_stats</a></span><span class="op">(</span>station_number <span class="op">=</span> <span class="st">"08NM116"</span>, 
                              start_year <span class="op">=</span> <span class="fl">1974</span><span class="op">)</span> </code></pre></div>
<pre><code>$Monthly_Cumulative_Volumetric_Stats</code></pre>
<p><img src="fasstr_users_guide_files/figure-html/unnamed-chunk-45-1.png" width="672"></p>
</div>
<div id="cumulative-daily-statistics" class="section level4">
<h4 class="hasAnchor">
<a href="#cumulative-daily-statistics" class="anchor"></a>Cumulative daily statistics</h4>
<p>The <code><a href="../reference/calc_daily_cumulative_stats.html">calc_daily_cumulative_stats()</a></code> and <code><a href="../reference/plot_daily_cumulative_stats.html">plot_daily_cumulative_stats()</a></code> functions calculate the mean, median, maximum, minimum, and percentiles of total cumulative daily flows. For each day of each year, the total volume or runoff yield is determined. Then within a given year, the cumulative total for each day is determined by added all previous days (ex. Jan-01 = Jan-01 total; Jan-02 = Jan-01+Jan-02 totals, etc.). Then the mean, median, maximum, minimum, and percentiles are calculated based on those daily cumulative totals for each year. In interpreting the information, if a given total flow is below the mean value, then the cumulative flow is less than average. In other words, less volume has passed through the station than normal at that point in time. Viewing the plot below may help understand how this function works. The percentiles in the <code>calc_</code> function are flexible using the <code>percentiles</code> argument.</p>
<div class="sourceCode" id="cb78"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/calc_daily_cumulative_stats.html">calc_daily_cumulative_stats</a></span><span class="op">(</span>station_number <span class="op">=</span> <span class="st">"08NM116"</span>, 
                            start_year <span class="op">=</span> <span class="fl">1974</span><span class="op">)</span></code></pre></div>
<pre><code># A tibble: 365 x 11
   STATION_NUMBER Date  DayofYear   Mean Median Minimum Maximum     P5    P25
   &lt;chr&gt;          &lt;chr&gt;     &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;
 1 08NM116        Jan-~         1 9.32e4 8.38e4  28339.  2.17e5 4.67e4 5.97e4
 2 08NM116        Jan-~         2 1.84e5 1.60e5  55123.  4.12e5 9.18e4 1.19e5
 3 08NM116        Jan-~         3 2.73e5 2.36e5  80179.  5.81e5 1.35e5 1.79e5
 4 08NM116        Jan-~         4 3.63e5 3.13e5 104717.  7.69e5 1.82e5 2.41e5
 5 08NM116        Jan-~         5 4.52e5 3.88e5 130810.  9.53e5 2.32e5 3.09e5
 6 08NM116        Jan-~         6 5.41e5 4.67e5 158026.  1.12e6 2.81e5 3.68e5
 7 08NM116        Jan-~         7 6.33e5 5.47e5 184982.  1.29e6 3.27e5 4.31e5
 8 08NM116        Jan-~         8 7.28e5 6.23e5 212112.  1.45e6 3.72e5 4.96e5
 9 08NM116        Jan-~         9 8.25e5 7.12e5 240365.  1.80e6 4.17e5 5.63e5
10 08NM116        Jan-~        10 9.21e5 8.03e5 269222.  2.21e6 4.65e5 6.27e5
# ... with 355 more rows, and 2 more variables: P75 &lt;dbl&gt;, P95 &lt;dbl&gt;</code></pre>
<p>The <code><a href="../reference/plot_daily_cumulative_stats.html">plot_daily_cumulative_stats()</a></code> function will plot the daily cumulative total mean, median, maximum, and minimum values along with the 5th, 25th, 75th, and 95th percentiles all on one plot. The percentiles are not customizable for this function.</p>
<div class="sourceCode" id="cb80"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/plot_daily_cumulative_stats.html">plot_daily_cumulative_stats</a></span><span class="op">(</span>station_number <span class="op">=</span> <span class="st">"08NM116"</span>, 
                            start_year <span class="op">=</span> <span class="fl">1974</span>,
                            use_yield <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> </code></pre></div>
<pre><code>$Daily_Cumulative_Yield_Stats</code></pre>
<p><img src="fasstr_users_guide_files/figure-html/unnamed-chunk-47-1.png" width="672"></p>
</div>
</div>
<div id="other-annual-statistics" class="section level3">
<h3 class="hasAnchor">
<a href="#other-annual-statistics" class="anchor"></a>Other Annual Statistics</h3>
<p>Beside the basic summary statistics, there are other useful statistics for interpreting annual streamflow data. They include the following::</p>
<ul>
<li>
<code><a href="../reference/calc_annual_flow_timing.html">calc_annual_flow_timing()</a></code> - calculate annual flow timing</li>
<li>
<code><a href="../reference/calc_annual_lowflows.html">calc_annual_lowflows()</a></code> - calculate annual low flow values and dates</li>
<li>
<code><a href="../reference/calc_annual_peaks.html">calc_annual_peaks()</a></code> - calculate annual low and high flow values and dates</li>
<li>
<code><a href="../reference/calc_annual_outside_normal.html">calc_annual_outside_normal()</a></code> - calculate annual days above and below normal</li>
<li>
<code><a href="../reference/calc_all_annual_stats.html">calc_all_annual_stats()</a></code> - calculate all <code>fasstr</code> annual statistics</li>
</ul>
<p>and their corresponding and other plotting functions:</p>
<ul>
<li>
<code><a href="../reference/plot_annual_flow_timing.html">plot_annual_flow_timing()</a></code> - plot annual flow timing</li>
<li>
<code><a href="../reference/plot_annual_lowflows.html">plot_annual_lowflows()</a></code> - plot annual low flow values and dates</li>
<li>
<code><a href="../reference/plot_annual_outside_normal.html">plot_annual_outside_normal()</a></code> - plot annual days above and below normal</li>
<li>
<code><a href="../reference/plot_annual_means.html">plot_annual_means()</a></code> - plot annual means compared to the long-term mean</li>
</ul>
<div id="annual-flow-timing" class="section level4">
<h4 class="hasAnchor">
<a href="#annual-flow-timing" class="anchor"></a>Annual flow timing</h4>
<p>The <code><a href="../reference/calc_annual_flow_timing.html">calc_annual_flow_timing()</a></code> calculates the day of year when a portion of a total annual volumetric flow has occurred. Using the <code>percent_total</code> argument, one or multiple portions of annual flow can be calculated. Using 50 as the <code>percent_total</code> is similar to the center of volume or timing of half flow. The day of year and date will be also be produced.</p>
<div class="sourceCode" id="cb82"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/calc_annual_flow_timing.html">calc_annual_flow_timing</a></span><span class="op">(</span>station_number <span class="op">=</span> <span class="st">"08NM116"</span>, 
                        start_year <span class="op">=</span> <span class="fl">1974</span><span class="op">)</span></code></pre></div>
<pre><code># A tibble: 44 x 10
   STATION_NUMBER  Year DoY_25pct_TotalQ Date_25pct_Tota~ DoY_33.3pct_Tot~
   &lt;chr&gt;          &lt;dbl&gt;            &lt;dbl&gt; &lt;date&gt;                      &lt;dbl&gt;
 1 08NM116         1974              135 1974-05-15                    146
 2 08NM116         1975              146 1975-05-26                    153
 3 08NM116         1976              143 1976-05-22                    151
 4 08NM116         1977              124 1977-05-04                    131
 5 08NM116         1978              134 1978-05-14                    142
 6 08NM116         1979              126 1979-05-06                    133
 7 08NM116         1980              127 1980-05-06                    132
 8 08NM116         1981              141 1981-05-21                    145
 9 08NM116         1982              147 1982-05-27                    155
10 08NM116         1983              126 1983-05-06                    137
# ... with 34 more rows, and 5 more variables: Date_33.3pct_TotalQ &lt;date&gt;,
#   DoY_50pct_TotalQ &lt;dbl&gt;, Date_50pct_TotalQ &lt;date&gt;, DoY_75pct_TotalQ &lt;dbl&gt;,
#   Date_75pct_TotalQ &lt;date&gt;</code></pre>
<p>The timing of flows can also be plotted.</p>
<div class="sourceCode" id="cb84"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/plot_annual_flow_timing.html">plot_annual_flow_timing</a></span><span class="op">(</span>station_number <span class="op">=</span> <span class="st">"08NM116"</span>,
                        start_year <span class="op">=</span> <span class="fl">1974</span><span class="op">)</span> </code></pre></div>
<pre><code>$Annual_Flow_Timing</code></pre>
<p><img src="fasstr_users_guide_files/figure-html/unnamed-chunk-49-1.png" width="672"></p>
</div>
<div id="annual-low-flows" class="section level4">
<h4 class="hasAnchor">
<a href="#annual-low-flows" class="anchor"></a>Annual low-flows</h4>
<p>The <code><a href="../reference/calc_annual_lowflows.html">calc_annual_lowflows()</a></code> calculates the annual minimum values, the day of year, and dates of specified rolling mean days (can do multiple days if desired).</p>
<div class="sourceCode" id="cb86"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/calc_annual_lowflows.html">calc_annual_lowflows</a></span><span class="op">(</span>station_number <span class="op">=</span> <span class="st">"08NM116"</span>, 
                     start_year <span class="op">=</span> <span class="fl">1974</span><span class="op">)</span></code></pre></div>
<pre><code># A tibble: 44 x 14
   STATION_NUMBER  Year Min_1_Day Min_1_Day_DoY Min_1_Day_Date Min_3_Day
   &lt;chr&gt;          &lt;dbl&gt;     &lt;dbl&gt;         &lt;dbl&gt; &lt;date&gt;             &lt;dbl&gt;
 1 08NM116         1974     0.447           333 1974-11-29         0.533
 2 08NM116         1975     0.320            11 1975-01-11         0.378
 3 08NM116         1976     0.736            38 1976-02-07         0.741
 4 08NM116         1977     0.564            73 1977-03-14         0.627
 5 08NM116         1978     0.532            55 1978-02-24         0.630
 6 08NM116         1979     0.411           268 1979-09-25         0.416
 7 08NM116         1980     0.623             9 1980-01-09         0.632
 8 08NM116         1981     0.398           261 1981-09-18         0.468
 9 08NM116         1982     0.815             6 1982-01-06         0.883
10 08NM116         1983     0.530           357 1983-12-23         0.562
# ... with 34 more rows, and 8 more variables: Min_3_Day_DoY &lt;dbl&gt;,
#   Min_3_Day_Date &lt;date&gt;, Min_7_Day &lt;dbl&gt;, Min_7_Day_DoY &lt;dbl&gt;,
#   Min_7_Day_Date &lt;date&gt;, Min_30_Day &lt;dbl&gt;, Min_30_Day_DoY &lt;dbl&gt;,
#   Min_30_Day_Date &lt;date&gt;</code></pre>
<p>The annual low flow values and the day of the low flow values can be plotted, separately, using the <code><a href="../reference/plot_annual_lowflows.html">plot_annual_lowflows()</a></code> function.</p>
<div class="sourceCode" id="cb88"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/plot_annual_lowflows.html">plot_annual_lowflows</a></span><span class="op">(</span>station_number <span class="op">=</span> <span class="st">"08NM116"</span>,
                     start_year <span class="op">=</span> <span class="fl">1974</span><span class="op">)</span> </code></pre></div>
<pre><code>$Annual_Low_Flows</code></pre>
<p><img src="fasstr_users_guide_files/figure-html/unnamed-chunk-51-1.png" width="672"></p>
<pre><code>
$Annual_Low_Flows_Dates</code></pre>
<p><img src="fasstr_users_guide_files/figure-html/unnamed-chunk-51-2.png" width="672"></p>
</div>
<div id="annual-peaks" class="section level4">
<h4 class="hasAnchor">
<a href="#annual-peaks" class="anchor"></a>Annual peaks</h4>
<p>Similar to <code><a href="../reference/calc_annual_lowflows.html">calc_annual_lowflows()</a></code>, <code><a href="../reference/calc_annual_peaks.html">calc_annual_peaks()</a></code> calculates the annual minimum and maximum values, the day of year, and dates of specified rolling mean days.</p>
<div class="sourceCode" id="cb91"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/calc_annual_peaks.html">calc_annual_peaks</a></span><span class="op">(</span>station_number <span class="op">=</span> <span class="st">"08NM116"</span>, 
                  start_year <span class="op">=</span> <span class="fl">1974</span><span class="op">)</span></code></pre></div>
<pre><code># A tibble: 44 x 8
   STATION_NUMBER  Year Min_1_Day Min_1_Day_DoY Min_1_Day_Date Max_1_Day
   &lt;chr&gt;          &lt;dbl&gt;     &lt;dbl&gt;         &lt;dbl&gt; &lt;date&gt;             &lt;dbl&gt;
 1 08NM116         1974     0.447           333 1974-11-29          66  
 2 08NM116         1975     0.320            11 1975-01-11          48.7
 3 08NM116         1976     0.736            38 1976-02-07          71.1
 4 08NM116         1977     0.564            73 1977-03-14          36  
 5 08NM116         1978     0.532            55 1978-02-24          44.5
 6 08NM116         1979     0.411           268 1979-09-25          43  
 7 08NM116         1980     0.623             9 1980-01-09          46.2
 8 08NM116         1981     0.398           261 1981-09-18          60.6
 9 08NM116         1982     0.815             6 1982-01-06          54.5
10 08NM116         1983     0.530           357 1983-12-23          60.2
# ... with 34 more rows, and 2 more variables: Max_1_Day_DoY &lt;dbl&gt;,
#   Max_1_Day_Date &lt;date&gt;</code></pre>
</div>
<div id="number-of-days-per-year-outside-of-normal" class="section level4">
<h4 class="hasAnchor">
<a href="#number-of-days-per-year-outside-of-normal" class="anchor"></a>Number of days per year outside of normal</h4>
<p>The <code><a href="../reference/calc_annual_outside_normal.html">calc_annual_outside_normal()</a></code> calculates the number of days per year that are above and below “normal”, “normal” typically defined as 25th and 75th percentiles. The normal limits can be determined using the <code>normal_percentiles</code> argument, listing the lower and upper normal ranges, respectively (e.g. <code>normal_percentiles = c(25, 75)</code>). The function calculates the lower and upper percentiles for each day of the year over all years and sums all days that are above or below the daily normal ranges for a given year. Rolling averages can also be used in this function using the <code>roll_days</code> argument.</p>
<div class="sourceCode" id="cb93"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/calc_annual_outside_normal.html">calc_annual_outside_normal</a></span><span class="op">(</span>station_number <span class="op">=</span> <span class="st">"08NM116"</span>, 
                           start_year <span class="op">=</span> <span class="fl">1974</span><span class="op">)</span></code></pre></div>
<pre><code># A tibble: 44 x 5
   STATION_NUMBER  Year Days_Below_Normal Days_Above_Normal Days_Outside_Normal
   &lt;chr&gt;          &lt;dbl&gt;             &lt;int&gt;             &lt;int&gt;               &lt;int&gt;
 1 08NM116         1974                72                77                 149
 2 08NM116         1975               138                32                 170
 3 08NM116         1976                54               144                 198
 4 08NM116         1977               107                 8                 115
 5 08NM116         1978                21               114                 135
 6 08NM116         1979               144                67                 211
 7 08NM116         1980                79                61                 140
 8 08NM116         1981                15               203                 218
 9 08NM116         1982                35               208                 243
10 08NM116         1983                14               208                 222
# ... with 34 more rows</code></pre>
<p>Each of the above, below, and total days outside of normal can be plotted using the <code><a href="../reference/plot_annual_outside_normal.html">plot_annual_outside_normal()</a></code> function.</p>
<div class="sourceCode" id="cb95"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/plot_annual_outside_normal.html">plot_annual_outside_normal</a></span><span class="op">(</span>station_number <span class="op">=</span> <span class="st">"08NM116"</span>, 
                           start_year <span class="op">=</span> <span class="fl">1974</span><span class="op">)</span> </code></pre></div>
<pre><code>$Annual_Days_Outside_Normal</code></pre>
<p><img src="fasstr_users_guide_files/figure-html/unnamed-chunk-54-1.png" width="672"></p>
</div>
<div id="calculating-all-annual-statistics" class="section level4">
<h4 class="hasAnchor">
<a href="#calculating-all-annual-statistics" class="anchor"></a>Calculating all annual statistics</h4>
<p>The <code><a href="../reference/calc_all_annual_stats.html">calc_all_annual_stats()</a></code> calculates all statistics that have a single annual value. This includes all the <code>calc_annual_*</code> and the <code>calc_monthly_statistics()</code> functions. Several arguments provided for customization of the statistics. There is no corresponding plotting function for this calculation function.</p>
<div class="sourceCode" id="cb97"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/colnames.html">colnames</a></span><span class="op">(</span><span class="fu"><a href="../reference/calc_all_annual_stats.html">calc_all_annual_stats</a></span><span class="op">(</span>station_number <span class="op">=</span> <span class="st">"08NM116"</span>,
                               start_year <span class="op">=</span> <span class="fl">1974</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<pre><code>  [1] "STATION_NUMBER"      "Year"                "Annual_Maximum"     
  [4] "Annual_Mean"         "Annual_Median"       "Annual_Minimum"     
  [7] "Annual_P10"          "Annual_P90"          "Min_1_Day"          
 [10] "Min_1_Day_DoY"       "Min_3_Day"           "Min_3_Day_DoY"      
 [13] "Min_7_Day"           "Min_7_Day_DoY"       "Min_30_Day"         
 [16] "Min_30_Day_DoY"      "Total_Volume_m3"     "Jan-Jun_Volume_m3"  
 [19] "Jul-Dec_Volume_m3"   "Jan-Mar_Volume_m3"   "Apr-Jun_Volume_m3"  
 [22] "Jul-Sep_Volume_m3"   "Oct-Dec_Volume_m3"   "Total_Yield_mm"     
 [25] "Jan-Jun_Yield_mm"    "Jul-Dec_Yield_mm"    "Jan-Mar_Yield_mm"   
 [28] "Apr-Jun_Yield_mm"    "Jul-Sep_Yield_mm"    "Oct-Dec_Yield_mm"   
 [31] "DoY_25pct_TotalQ"    "DoY_33pct_TotalQ"    "DoY_50pct_TotalQ"   
 [34] "DoY_75pct_TotalQ"    "Days_Below_Normal"   "Days_Above_Normal"  
 [37] "Days_Outside_Normal" "Jan_Mean"            "Jan_Median"         
 [40] "Jan_Maximum"         "Jan_Minimum"         "Jan_P10"            
 [43] "Jan_P20"             "Feb_Mean"            "Feb_Median"         
 [46] "Feb_Maximum"         "Feb_Minimum"         "Feb_P10"            
 [49] "Feb_P20"             "Mar_Mean"            "Mar_Median"         
 [52] "Mar_Maximum"         "Mar_Minimum"         "Mar_P10"            
 [55] "Mar_P20"             "Apr_Mean"            "Apr_Median"         
 [58] "Apr_Maximum"         "Apr_Minimum"         "Apr_P10"            
 [61] "Apr_P20"             "May_Mean"            "May_Median"         
 [64] "May_Maximum"         "May_Minimum"         "May_P10"            
 [67] "May_P20"             "Jun_Mean"            "Jun_Median"         
 [70] "Jun_Maximum"         "Jun_Minimum"         "Jun_P10"            
 [73] "Jun_P20"             "Jul_Mean"            "Jul_Median"         
 [76] "Jul_Maximum"         "Jul_Minimum"         "Jul_P10"            
 [79] "Jul_P20"             "Aug_Mean"            "Aug_Median"         
 [82] "Aug_Maximum"         "Aug_Minimum"         "Aug_P10"            
 [85] "Aug_P20"             "Sep_Mean"            "Sep_Median"         
 [88] "Sep_Maximum"         "Sep_Minimum"         "Sep_P10"            
 [91] "Sep_P20"             "Oct_Mean"            "Oct_Median"         
 [94] "Oct_Maximum"         "Oct_Minimum"         "Oct_P10"            
 [97] "Oct_P20"             "Nov_Mean"            "Nov_Median"         
[100] "Nov_Maximum"         "Nov_Minimum"         "Nov_P10"            
[103] "Nov_P20"             "Dec_Mean"            "Dec_Median"         
[106] "Dec_Maximum"         "Dec_Minimum"         "Dec_P10"            
[109] "Dec_P20"            </code></pre>
</div>
<div id="plotting-annual-means" class="section level4">
<h4 class="hasAnchor">
<a href="#plotting-annual-means" class="anchor"></a>Plotting annual means</h4>
<p>The <code><a href="../reference/plot_annual_means.html">plot_annual_means()</a></code> function provides a way to visualize how annual means fluctuate around the long-term mean. The x-axis is located at the long-term mean annual discharge (mean of all discharge values over all years) and the bars shows the annual means. The plot is essentially an anomaly plot but with their y-value matching the mean value and not difference from the mean.</p>
<div class="sourceCode" id="cb99"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/plot_annual_means.html">plot_annual_means</a></span><span class="op">(</span>station_number <span class="op">=</span> <span class="st">"08NM116"</span>, 
                  start_year <span class="op">=</span> <span class="fl">1974</span><span class="op">)</span> </code></pre></div>
<pre><code>$Annual_Means</code></pre>
<p><img src="fasstr_users_guide_files/figure-html/unnamed-chunk-56-1.png" width="672"></p>
<hr>
</div>
</div>
</div>
<div id="functions-for-computing-analyses" class="section level2">
<h2 class="hasAnchor">
<a href="#functions-for-computing-analyses" class="anchor"></a>7. Functions for Computing Analyses</h2>
<p>There are several functions that provide more in-depth analyses. These functions begin with <code>compute_</code> instead of <code>calc_</code> and typically produce more than just a tibble data frame of statistics, like the <code>calc_</code> functions. Most of these produce a list of objects, consisting of both tibbles and plots. There are three groups of analysis functions: annual trending, annual volume frequency analyses, and a full analysis (of most <code>fasstr</code> functions). There is a separate vignette for each analysis type to provide more information.</p>
<div id="annual-trending-analysis" class="section level3">
<h3 class="hasAnchor">
<a href="#annual-trending-analysis" class="anchor"></a>Annual Trending Analysis</h3>
<p>The <code><a href="../reference/compute_annual_trends.html">compute_annual_trends()</a></code> function calculates prewhitened non-parametric annual trends on streamflow data using the <a href="https://CRAN.R-project.org/package=zyp"><code>zyp</code></a> package. The function calculates various annual metrics using the <code><a href="../reference/calc_all_annual_stats.html">calc_all_annual_stats()</a></code> function and then calculates and plots the trending data. The magnitude of trends is first computed using the Theil-Sen approach. Depending on the selected method, either <code>"zhang"</code> or <code>"yuepilon"</code>, the trends are adjusted for autocorrelation and then a Mann-Kendall test for trend is applied to the series. See the <a href="https://CRAN.R-project.org/package=zyp"><code>zyp</code></a> package and the <a href="https://bcgov.github.io/fasstr/articles/fasstr_trending_analysis.html">trending vignette</a> for more information.</p>
<p>The <code><a href="../reference/compute_annual_trends.html">compute_annual_trends()</a></code> function outputs several objects in a list:</p>
<ol style="list-style-type: decimal">
<li>$Annual_Trends_Data - a tibble of annual data from the <code><a href="../reference/calc_all_annual_stats.html">calc_all_annual_stats()</a></code> function used for trending</li>
<li>$Annual_Trends_Results - a tibble of annual trending results, from both <code>zyp</code> and <code>fasstr</code>
</li>
<li>$Annual_* - a <code>ggplot2</code> object for every annual statistic trended, with the slope plotted if an alpha value is chosen using the <code>zyp_alpha</code> argument (ex. <code>zyp_alpha = 0.05</code>).</li>
</ol>
</div>
<div id="volume-frequency-analyses" class="section level3">
<h3 class="hasAnchor">
<a href="#volume-frequency-analyses" class="anchor"></a>Volume Frequency Analyses</h3>
<p>There are five <code>fasstr</code> functions that perform various volume frequency analyses. Frequency analyses are used to determine probabilities of events of certain sizes (typically annual high or low flows). The analyses produce plots of event series and computed quantiles fitted from either Log-Pearson Type III or Weibull probability distributions. See the <a href="https://bcgov.github.io/fasstr/articles/fasstr_frequency_analysis.html">frequency analysis vignette</a> for more information.</p>
<p>The <code><a href="../reference/compute_annual_frequencies.html">compute_annual_frequencies()</a></code> performs an annual daily (or selected duration using <code>roll_days</code> argument) low-flow (by default) or high-flow (using <code>use_max = TRUE</code> argument) frequency analysis on annual series. This analysis uses the daily mean lows or highs. The <code><a href="../reference/compute_hydat_peak_frequencies.html">compute_hydat_peak_frequencies()</a></code> function performs an annual instantaneous low (by default) or high peak frequency analysis. The <code>data</code> argument cannot be used for the HYDAT peak analysis. Both functions output several objects in a list:</p>
<ol style="list-style-type: decimal">
<li>$Freq_Analysis_Data - Tibble of computed annual minimums (or maximums)</li>
<li>$Freq_Plot_Data - Tibble of plotting coordinates used in the frequency plot</li>
<li>$Freq_Plot - <code>ggplot2</code> object of the frequency plot</li>
<li>$Freq_Fitting - List of <a href="https://cran.r-project.org/package=fitdistrplus"><code>fitdistrplus</code></a> objects of the fitted distributions.</li>
<li>$Freq_Fitted_Quantiles - Tibble with fitted quantiles.</li>
</ol>
<p>The <code><a href="../reference/compute_frequency_quantile.html">compute_frequency_quantile()</a></code> function performs annual daily (or selected duration) low-flow (by default) or high-flow (using <code>use_max = TRUE</code> argument) frequency analysis on annual series but only returns the fitted quantile based on the selected return period. Both the numeric arguments <code>roll_days</code> and <code>return_period</code> are required. It results in a single value. For example, supplying <code>roll_days = 7</code> and <code>return_period = 10</code> to the function with a data set will return the 7-day low-flow with a 10-year return period (i.e. 7Q10).</p>
<p>To compute a volume frequency analysis on custom data, use the <code><a href="../reference/compute_frequency_analysis.html">compute_frequency_analysis()</a></code> function. The data points to be used in the analysis must be provided in a data frame with a column of events (or years), the flow values (values), and the measure (or the type of value it is, “7-day lows”, for example. All other data filtering options are not included.</p>
</div>
<div id="full-analysis" class="section level3">
<h3 class="hasAnchor">
<a href="#full-analysis" class="anchor"></a>Full Analysis</h3>
<p>If desired, a suite of <code>fasstr</code> functions can be computed using the <code><a href="../reference/compute_full_analysis.html">compute_full_analysis()</a></code>, producing lists of tables and plots organized in lists by analysis type. <code><a href="../reference/write_full_analysis.html">write_full_analysis()</a></code> will create both all the objects and also write data to your computer, in Excel-ready formats and image files. The filetypes of plots and tables can be set using the <code>plot_filetype</code> and <code>table_filetype</code> arguments, respectively. See the <a href="https://bcgov.github.io/fasstr/articles/fasstr_full_analysis.html">full analysis vignette</a> for more information on customizing the analyses and statistics.</p>
<p>The plots and tables are grouped into the following analyses:</p>
<ol style="list-style-type: decimal">
<li>Screening</li>
<li>Long-term</li>
<li>Annual</li>
<li>Monthly</li>
<li>Daily</li>
<li>Annual Trends</li>
<li>Low-flow Frequencies</li>
</ol>
<hr>
</div>
</div>
<div id="customizing-functions-with-arguments---data-filtering-and-options" class="section level2">
<h2 class="hasAnchor">
<a href="#customizing-functions-with-arguments---data-filtering-and-options" class="anchor"></a>8. Customizing Functions with Arguments - Data Filtering and Options</h2>
<p>While tidying and filtering data to desired parameters or time periods can be completed to flow data frames prior to passing them onto <code>fasstr</code> functions, a suite of function arguments have been provided to allow for in-function customization of tidying and filtering. Described here are some of the options available in <code>fasstr</code> functions on how to handle missing dates, filter for specific years or months, and select desired statistics from some of the <code>fasstr</code> functions. Not all functions have all these options see the <a href="https://bcgov.github.io/fasstr/reference/index.html">documentation</a> for each function usage (can also use <code><a href="../reference/calc_annual_stats.html">?calc_annual_stats</a></code> to see documentation in R).</p>
<div id="handling-missing-dates" class="section level3">
<h3 class="hasAnchor">
<a href="#handling-missing-dates" class="anchor"></a>Handling Missing Dates</h3>
<p>Most functions will automatically (<code>ignore_missing = FALSE</code>) not calculate a statistic for a given period (a year or month or day of year, for example) if there is a date with missing data (<code>NA</code> value) and will result in an NA value or will not plot (base <code>na.rm = FALSE</code>). For example, if there at least one missing day for a given year, an annual statistic will not be calculated for that year. A warning message will appear in the console indicating as such to ensure the user is aware of missing data. See the following code for an example with missing dates:</p>
<div class="sourceCode" id="cb101"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/calc_annual_stats.html">calc_annual_stats</a></span><span class="op">(</span>station_number <span class="op">=</span> <span class="st">"08NM116"</span><span class="op">)</span></code></pre></div>
<p>If you want to calculate the statistics regardless of missing dates, use the <code>ignore_missing = TRUE</code> argument. Otherwise you may need to filter for complete data years (see the <code><a href="../reference/screen_flow_data.html">screen_flow_data()</a></code> function).</p>
<div class="sourceCode" id="cb102"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/calc_annual_stats.html">calc_annual_stats</a></span><span class="op">(</span>station_number <span class="op">=</span> <span class="st">"08NM116"</span>, 
                  ignore_missing <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></code></pre></div>
</div>
<div id="dates-filtering" class="section level3">
<h3 class="hasAnchor">
<a href="#dates-filtering" class="anchor"></a>Dates Filtering</h3>
<p>There are several options in the function that allow you choose year options and to filter for specific time periods. If there is a specific period, years or months, to be analyzed there are several options to customize the data supplied. While filtering of data can be done to your flow data set prior supplying it to a function (using <code>dplyr</code> filtering, for example), these options provide quick solutions for in-function filtering that can be incorporated into a workflow.</p>
<div id="water-year-and-start-month" class="section level4">
<h4 class="hasAnchor">
<a href="#water-year-and-start-month" class="anchor"></a>Water year and start month</h4>
<p>By default, the functions will analyze/group/filter data by calendar years (Jan-Dec). However, some analyses require use of water years, or hydrologic years, starting in other months. If use of water years is desired not starting in January, then set <code>water_year_start</code> with a month other than 1. The water year is identified by the calendar year in which it ends. For example, a water year from Oct 2000 to Sep 2001 would be water year 2001.</p>
<p>Example of a default water year, starting in October:</p>
<div class="sourceCode" id="cb103"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/calc_annual_stats.html">calc_annual_stats</a></span><span class="op">(</span>station_number <span class="op">=</span> <span class="st">"08NM116"</span>, 
                  ignore_missing <span class="op">=</span> <span class="cn">TRUE</span>,
                  water_year_start <span class="op">=</span> <span class="fl">9</span><span class="op">)</span></code></pre></div>
<p>Example of a water year starting in August:</p>
<div class="sourceCode" id="cb104"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/calc_annual_stats.html">calc_annual_stats</a></span><span class="op">(</span>station_number <span class="op">=</span> <span class="st">"08NM116"</span>, 
                  ignore_missing <span class="op">=</span> <span class="cn">TRUE</span>,
                  water_year_start <span class="op">=</span> <span class="fl">8</span><span class="op">)</span></code></pre></div>
</div>
<div id="selecting-and-excluding-years" class="section level4">
<h4 class="hasAnchor">
<a href="#selecting-and-excluding-years" class="anchor"></a>Selecting and excluding years</h4>
<p>To specify select years used in your analysis, the <code>start_year</code> and <code>end_year</code> arguments (providing a single value) can filter the years. Using the <code>exclude_years</code> argument (providing a single or vector of years) will allow you to remove certain years from the analysis. Leaving these arguments blank will include all years in the data set for the analysis.</p>
<p>Example of filtering for start and end years:</p>
<div class="sourceCode" id="cb105"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/calc_annual_stats.html">calc_annual_stats</a></span><span class="op">(</span>station_number <span class="op">=</span> <span class="st">"08NM116"</span>, 
                  start_year <span class="op">=</span> <span class="fl">1980</span>, 
                  end_year <span class="op">=</span> <span class="fl">2010</span><span class="op">)</span></code></pre></div>
<p>Examples of removing certain years (outliers, bad data, etc.) using exclude_years:</p>
<div class="sourceCode" id="cb106"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/calc_annual_stats.html">calc_annual_stats</a></span><span class="op">(</span>station_number <span class="op">=</span> <span class="st">"08NM116"</span>, 
                  start_year <span class="op">=</span> <span class="fl">1980</span>, 
                  end_year <span class="op">=</span> <span class="fl">2010</span>,
                  exclude_years <span class="op">=</span> <span class="fl">1982</span><span class="op">)</span></code></pre></div>
<div class="sourceCode" id="cb107"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/calc_annual_stats.html">calc_annual_stats</a></span><span class="op">(</span>station_number <span class="op">=</span> <span class="st">"08NM116"</span>, 
                  start_year <span class="op">=</span> <span class="fl">1980</span>, 
                  end_year <span class="op">=</span> <span class="fl">2010</span>,
                  exclude_years <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1982</span><span class="op">:</span><span class="fl">1984</span><span class="op">)</span><span class="op">)</span></code></pre></div>
</div>
<div id="using-only-years-with-complete-data" class="section level4">
<h4 class="hasAnchor">
<a href="#using-only-years-with-complete-data" class="anchor"></a>Using only years with complete data</h4>
<p>If your data has missing dates, but you would like to use only those years with complete data, some functions utilize the <code>complete_years</code> argument where the data will automatically be filtered for years with complete data and statistics will be calculated. Only years with complete data will be included into the following example.</p>
<div class="sourceCode" id="cb108"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/calc_longterm_daily_stats.html">calc_longterm_daily_stats</a></span><span class="op">(</span>station_number <span class="op">=</span> <span class="st">"08NM116"</span>, 
                          complete_years <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></code></pre></div>
<p>Some functions, like below, require only years with complete data (statistics are based on full years of data), so years with missing dates will be automatically ignored:</p>
<div class="sourceCode" id="cb109"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/calc_annual_flow_timing.html">calc_annual_flow_timing</a></span><span class="op">(</span>station_number <span class="op">=</span> <span class="st">"08NM116"</span><span class="op">)</span></code></pre></div>
</div>
<div id="selecting-for-months" class="section level4">
<h4 class="hasAnchor">
<a href="#selecting-for-months" class="anchor"></a>Selecting for months</h4>
<p>Some functions allow you to specify select months used in your analysis, using the <code>months</code> argument. By providing a vector of months (1 through 12) only those months will be used in an analysis. For example, using the <code>months</code> argument with the <code><a href="../reference/calc_annual_stats.html">calc_annual_stats()</a></code> function will calculate the annual statistics for only those months listed. So, if summer statistics are required you supply <code>months = 6:8</code> to the function. Leaving this arguments blank will include all months in the data set for the analysis.</p>
<p>Example of filtering for months June through August:</p>
<div class="sourceCode" id="cb110"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/calc_annual_stats.html">calc_annual_stats</a></span><span class="op">(</span>station_number <span class="op">=</span> <span class="st">"08NM116"</span>, 
                  start_year <span class="op">=</span> <span class="fl">1980</span>, 
                  end_year <span class="op">=</span> <span class="fl">2010</span>,
                  months <span class="op">=</span> <span class="fl">6</span><span class="op">:</span><span class="fl">8</span><span class="op">)</span></code></pre></div>
<p>A few functions, including the <code><a href="../reference/calc_longterm_daily_stats.html">calc_longterm_daily_stats()</a></code>, <code><a href="../reference/plot_longterm_daily_stats.html">plot_longterm_daily_stats()</a></code>, and <code><a href="../reference/plot_flow_duration.html">plot_flow_duration()</a></code> functions will allow you to add a customized time period to your data frame or plot. Using the <code>custom_months</code> argument you can list a vector of months (numeric 1:12). By default, the data will be labelled as “Custom-Months” but can be customized by providing a character string to the <code>custom_months_label</code> argument.</p>
<p>Example of custom months and labelling:</p>
<div class="sourceCode" id="cb111"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/calc_longterm_daily_stats.html">calc_longterm_daily_stats</a></span><span class="op">(</span>station_number <span class="op">=</span> <span class="st">"08NM116"</span>, 
                          start_year <span class="op">=</span> <span class="fl">1980</span>, 
                          end_year <span class="op">=</span> <span class="fl">2010</span>,
                          custom_months <span class="op">=</span> <span class="fl">6</span><span class="op">:</span><span class="fl">8</span>,
                          custom_months_label <span class="op">=</span> <span class="st">"Summer"</span><span class="op">)</span></code></pre></div>
</div>
</div>
<div id="rolling-averages" class="section level3">
<h3 class="hasAnchor">
<a href="#rolling-averages" class="anchor"></a>Rolling averages</h3>
<p>Some functions allow you to specify analyzing the data using rolling mean data as opposed to the daily means. For those functions with the <code>roll_days</code> and <code>roll_align</code> arguments, analyses will be computed on the daily mean by default (can leave them blank if so). If choosing to conduct an analysis on 7-day rolling means, you would set <code>roll_days = 7</code>. Some functions allow multiple rolling days to be provided (see function documentation). The <code>roll_align</code> argument determines the direction of the rolling mean: see the “Adding rolling means” portion in Section 4 to see how the <code>roll_days</code> and <code>roll_align</code> work together.</p>
<p>Example of a 7-day rolling mean analysis (single <code>roll_days</code> use):</p>
<div class="sourceCode" id="cb112"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/calc_annual_stats.html">calc_annual_stats</a></span><span class="op">(</span>station_number <span class="op">=</span> <span class="st">"08NM116"</span>, 
                  start_year <span class="op">=</span> <span class="fl">1980</span>,
                  end_year <span class="op">=</span> <span class="fl">2010</span>,
                  roll_days <span class="op">=</span> <span class="fl">7</span><span class="op">)</span></code></pre></div>
<p>Example of a 7- and 30-day rolling mean analysis (multiple <code>roll_days</code> use):</p>
<div class="sourceCode" id="cb113"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/plot_annual_lowflows.html">plot_annual_lowflows</a></span><span class="op">(</span>station_number <span class="op">=</span> <span class="st">"08NM116"</span>, 
                     start_year <span class="op">=</span> <span class="fl">1980</span>, 
                     end_year <span class="op">=</span> <span class="fl">2010</span>,
                     roll_days <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">7</span>,<span class="fl">30</span><span class="op">)</span><span class="op">)</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span></code></pre></div>
<p><img src="fasstr_users_guide_files/figure-html/unnamed-chunk-69-1.png" width="672"></p>
</div>
<div id="percentiles-and-other-statistics" class="section level3">
<h3 class="hasAnchor">
<a href="#percentiles-and-other-statistics" class="anchor"></a>Percentiles and other statistics</h3>
<p>Each <code>fasstr</code> function comes with their default statistics to be calculated. While some cannot be changed (some plotting functions), most have the ability to customize what is calculated. Look up the default settings for each function in their documentation (<code><a href="../reference/calc_longterm_daily_stats.html">?calc_longterm_daily_stats</a></code> for example).</p>
<p>By default, the basic summary statistics functions will calculate the mean, median, maximum, and minimum values for each time period; these will automatically be calculated can cannot be removed by an argument option (can remove afterwards if necessary). These functions also calculate default percentiles, which can be customized by changing the desired percentiles by providing a numeric vector of numbers (between 0 and 100) to the <code>percentiles</code> argument.</p>
<p>This example shows the default percentiles for the <code><a href="../reference/calc_annual_stats.html">calc_annual_stats()</a></code> function (10 and 90th percentiles):</p>
<div class="sourceCode" id="cb114"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/calc_annual_stats.html">calc_annual_stats</a></span><span class="op">(</span>station_number <span class="op">=</span> <span class="st">"08NM116"</span>, 
                  start_year <span class="op">=</span> <span class="fl">1980</span>, 
                  end_year <span class="op">=</span> <span class="fl">2010</span><span class="op">)</span></code></pre></div>
<p>This example shows custom percentiles for the <code><a href="../reference/calc_annual_stats.html">calc_annual_stats()</a></code> function (5 and 25th percentiles):</p>
<div class="sourceCode" id="cb115"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/calc_annual_stats.html">calc_annual_stats</a></span><span class="op">(</span>station_number <span class="op">=</span> <span class="st">"08NM116"</span>, 
                  start_year <span class="op">=</span> <span class="fl">1980</span>, 
                  end_year <span class="op">=</span> <span class="fl">2010</span>,
                  percentiles <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">5</span>,<span class="fl">25</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<p>The following are some examples of how to customize results from other types of functions. See function documentations for full argument uses.</p>
<p>Example of calculating dates of the 10 and 20 percent of total annual flow:</p>
<div class="sourceCode" id="cb116"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/calc_annual_flow_timing.html">calc_annual_flow_timing</a></span><span class="op">(</span>station_number <span class="op">=</span> <span class="st">"08NM116"</span>, 
                        start_year <span class="op">=</span> <span class="fl">1980</span>, 
                        end_year <span class="op">=</span> <span class="fl">2010</span>,
                        percent_total <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">10</span>,<span class="fl">20</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<p>Example of plotting the number of days per years outside of the 10th and 90th percentiles (25th and 75th percentiles are default):</p>
<div class="sourceCode" id="cb117"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/plot_annual_outside_normal.html">plot_annual_outside_normal</a></span><span class="op">(</span>station_number <span class="op">=</span> <span class="st">"08NM116"</span>, 
                           start_year <span class="op">=</span> <span class="fl">1980</span>, 
                           end_year <span class="op">=</span> <span class="fl">2010</span>,
                           normal_percentiles <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">10</span>,<span class="fl">90</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<pre><code>$Annual_Days_Outside_Normal</code></pre>
<p><img src="fasstr_users_guide_files/figure-html/unnamed-chunk-73-1.png" width="672"></p>
<div id="data-frame-options" class="section level4">
<h4 class="hasAnchor">
<a href="#data-frame-options" class="anchor"></a>Data frame options</h4>
<p>An option when working with the functions that produce data frames is to transpose the rows and columns of the data. Most functions by default provide data results such there are columns of statistics for each station and time period. See the example here:</p>
<div class="sourceCode" id="cb119"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/calc_longterm_daily_stats.html">calc_longterm_daily_stats</a></span><span class="op">(</span>station_number <span class="op">=</span> <span class="st">"08NM116"</span>, 
                          start_year <span class="op">=</span> <span class="fl">1980</span>, 
                          end_year <span class="op">=</span> <span class="fl">2010</span><span class="op">)</span></code></pre></div>
<pre><code># A tibble: 13 x 8
   STATION_NUMBER Month      Mean Median Maximum Minimum   P10   P90
   &lt;chr&gt;          &lt;fct&gt;     &lt;dbl&gt;  &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
 1 08NM116        Jan        1.20  0.965    9.5    0.160 0.548  1.85
 2 08NM116        Feb        1.15  0.968    4.41   0.140 0.489  1.97
 3 08NM116        Mar        1.82  1.38     9.86   0.380 0.720  3.70
 4 08NM116        Apr        8.33  6.22    37.9    0.505 1.54  17.8 
 5 08NM116        May       23.6  20.9     74.4    3.83  9.37  40.8 
 6 08NM116        Jun       21.3  19.4     84.5    0.450 6.10  38.6 
 7 08NM116        Jul        6.42  3.94    54.5    0.332 1.02  14.7 
 8 08NM116        Aug        2.11  1.57    13.3    0.427 0.779  4.21
 9 08NM116        Sep        2.21  1.62    14.6    0.364 0.740  4.35
10 08NM116        Oct        2.10  1.65    15.2    0.267 0.803  3.95
11 08NM116        Nov        2.02  1.71    11.7    0.260 0.562  3.78
12 08NM116        Dec        1.31  1.08     7.30   0.342 0.5    2.37
13 08NM116        Long-term  6.14  1.89    84.5    0.140 0.685 19.3 </code></pre>
<p>In some circumstances, however, it may be more convenient to wrangle the data such that there are columns for stations (or groupings) and a single column with all statistics, and then the values are placed in columns for each respective time period. See the following example when setting <code>transpose = TRUE</code>.</p>
<div class="sourceCode" id="cb121"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/calc_longterm_daily_stats.html">calc_longterm_daily_stats</a></span><span class="op">(</span>station_number <span class="op">=</span> <span class="st">"08NM116"</span>, 
                          start_year <span class="op">=</span> <span class="fl">1980</span>, 
                          end_year <span class="op">=</span> <span class="fl">2010</span>,
                          transpose <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></code></pre></div>
<pre><code># A tibble: 6 x 15
  STATION_NUMBER Statistic   Jan   Feb   Mar    Apr   May    Jun    Jul    Aug
  &lt;chr&gt;          &lt;fct&gt;     &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;
1 08NM116        Mean      1.20  1.15  1.82   8.33  23.6  21.3    6.42   2.11 
2 08NM116        Median    0.965 0.968 1.38   6.22  20.9  19.4    3.94   1.57 
3 08NM116        Maximum   9.5   4.41  9.86  37.9   74.4  84.5   54.5   13.3  
4 08NM116        Minimum   0.160 0.140 0.380  0.505  3.83  0.450  0.332  0.427
5 08NM116        P10       0.548 0.489 0.720  1.54   9.37  6.10   1.02   0.779
6 08NM116        P90       1.85  1.97  3.70  17.8   40.8  38.6   14.7    4.21 
# ... with 5 more variables: Sep &lt;dbl&gt;, Oct &lt;dbl&gt;, Nov &lt;dbl&gt;, Dec &lt;dbl&gt;,
#   `Long-term` &lt;dbl&gt;</code></pre>
</div>
<div id="plotting-options" class="section level4">
<h4 class="hasAnchor">
<a href="#plotting-options" class="anchor"></a>Plotting options</h4>
<div id="logarithmic-discharge-scale" class="section level5">
<h5 class="hasAnchor">
<a href="#logarithmic-discharge-scale" class="anchor"></a>Logarithmic discharge scale</h5>
<p>Depending on the plotting function, discharge data will be plotted using a linear or a logarithmic scale (depending on the scale of data). This can be altered using the <code>log_discharge</code> argument. Here is example of plotting with a linear scale (default <code>log_discharge = FALSE</code>):</p>
<div class="sourceCode" id="cb123"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/plot_annual_stats.html">plot_annual_stats</a></span><span class="op">(</span>station_number <span class="op">=</span> <span class="st">"08NM116"</span>, 
                  start_year <span class="op">=</span> <span class="fl">1980</span>,
                  end_year <span class="op">=</span> <span class="fl">2010</span><span class="op">)</span></code></pre></div>
<pre><code>$Annual_Statistics</code></pre>
<p><img src="fasstr_users_guide_files/figure-html/unnamed-chunk-76-1.png" width="672"></p>
<p>Set the discharge scale to be logarithmic (<code>log_discharge = TRUE</code>):</p>
<div class="sourceCode" id="cb125"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/plot_annual_stats.html">plot_annual_stats</a></span><span class="op">(</span>station_number <span class="op">=</span> <span class="st">"08NM116"</span>, 
                  start_year <span class="op">=</span> <span class="fl">1980</span>,
                  end_year <span class="op">=</span> <span class="fl">2010</span>,
                  log_discharge <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></code></pre></div>
<pre><code>$Annual_Statistics</code></pre>
<p><img src="fasstr_users_guide_files/figure-html/unnamed-chunk-77-1.png" width="672"></p>
</div>
<div id="including-a-standard-title-on-the-plot" class="section level5">
<h5 class="hasAnchor">
<a href="#including-a-standard-title-on-the-plot" class="anchor"></a>Including a standard title on the plot</h5>
<p>The logical <code>include_title</code> argument adds the station number (or grouping identifier from the <code>groupings</code> argument), and in some cases the statistics as well. The argument’s default is <code>FALSE</code>.</p>
<p>Example of including a title when plotting (<code>include_title = TRUE</code>):</p>
<div class="sourceCode" id="cb127"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/plot_annual_stats.html">plot_annual_stats</a></span><span class="op">(</span>station_number <span class="op">=</span> <span class="st">"08NM116"</span>, 
                  start_year <span class="op">=</span> <span class="fl">1980</span>,
                  end_year <span class="op">=</span> <span class="fl">2010</span>,
                  include_title <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></code></pre></div>
<pre><code>$Annual_Statistics</code></pre>
<p><img src="fasstr_users_guide_files/figure-html/unnamed-chunk-78-1.png" width="672"></p>
<p>Example of including a title when plotting <code>include_title = TRUE</code> where the statistic is also displayed:</p>
<div class="sourceCode" id="cb129"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/plot_monthly_stats.html">plot_monthly_stats</a></span><span class="op">(</span>station_number <span class="op">=</span> <span class="st">"08NM116"</span>, 
                   start_year <span class="op">=</span> <span class="fl">1980</span>,
                   end_year <span class="op">=</span> <span class="fl">2010</span>,
                   include_title <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span></code></pre></div>
<p><img src="fasstr_users_guide_files/figure-html/unnamed-chunk-79-1.png" width="672"></p>
<p>Customizing a plot by using additional <code>ggplot2</code> functions:</p>
<div class="sourceCode" id="cb130"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="http://ggplot2.tidyverse.org">ggplot2</a></span><span class="op">)</span>

<span class="co"># Create the plot list and extract the plot using [[1]]</span>
<span class="va">plot</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/plot_daily_stats.html">plot_daily_stats</a></span><span class="op">(</span>station_number <span class="op">=</span> <span class="st">"08NM116"</span>, start_year <span class="op">=</span> <span class="fl">1980</span><span class="op">)</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span>

<span class="co"># Customize the plot with various `ggplot2` functions</span>
<span class="va">plot</span> <span class="op">+</span> 
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_abline.html">geom_hline</a></span><span class="op">(</span>yintercept <span class="op">=</span> <span class="fl">1.5</span>, colour <span class="op">=</span> <span class="st">"red"</span>, linetype <span class="op">=</span> <span class="fl">2</span>, size <span class="op">=</span> <span class="fl">1</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_abline.html">geom_vline</a></span><span class="op">(</span>xintercept <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html">as.Date</a></span><span class="op">(</span><span class="st">"1900-03-01"</span><span class="op">)</span>, colour <span class="op">=</span> <span class="st">"darkgray"</span>, linetype <span class="op">=</span> <span class="fl">1</span>, size <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_abline.html">geom_vline</a></span><span class="op">(</span>xintercept <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html">as.Date</a></span><span class="op">(</span><span class="st">"1900-08-05"</span><span class="op">)</span>, colour <span class="op">=</span> <span class="st">"darkgray"</span>, linetype <span class="op">=</span> <span class="fl">1</span>, size <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">ggtitle</a></span><span class="op">(</span><span class="st">"Mission Creek Annual Hydrograph"</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">ylab</a></span><span class="op">(</span><span class="st">"Flow (cms)"</span><span class="op">)</span></code></pre></div>
<p><img src="fasstr_users_guide_files/figure-html/unnamed-chunk-80-1.png" width="672"></p>
<hr>
</div>
</div>
</div>
</div>
<div id="writing-tables-and-plots" class="section level2">
<h2 class="hasAnchor">
<a href="#writing-tables-and-plots" class="anchor"></a>9. Writing Tables and Plots</h2>
<p>To support saving the <code>fasstr</code> tables and plots to a directory, there are several functions included in this package. These include the following:</p>
<ul>
<li>
<code><a href="../reference/write_flow_data.html">write_flow_data()</a></code> - write a streamflow data set as a .xlsx, .xls, or .csv file</li>
<li>
<code><a href="../reference/write_results.html">write_results()</a></code> - write a data frame as a .xlsx, .xls, or .csv file</li>
<li>
<code><a href="../reference/write_plots.html">write_plots()</a></code> - write plots from a list into a directory or PDF document</li>
<li>
<code><a href="../reference/write_objects_list.html">write_objects_list()</a></code> - write all tables and plots contained in a list</li>
</ul>
<div id="writing-a-flow-data-set" class="section level4">
<h4 class="hasAnchor">
<a href="#writing-a-flow-data-set" class="anchor"></a>Writing a flow data set</h4>
<p>To directly save a streamflow data set from HYDAT or your own custom data frame onto your computer, you can use the <code><a href="../reference/write_flow_data.html">write_flow_data()</a></code> function. By listing the <code>station_number</code> or <code>data</code> data frame, the data set will save a file into the working directory, unless otherwise specified using the <code>file_name</code> argument. If using the <code>station_number</code> argument and listing only one station without listing a name with <code>file_name</code>, the name will include the number and followed by "_daily_data.xlsx“; and if multiple stations are listed the name will be”HYDAT_daily_data.xlsx“. When using the <code>data</code> argument without listing a name with <code>file_name</code> the default name will be <code>fasstr_daily_data.xlsx</code>. To use another file type than”xlsx" (options are “xlsx”, “xls”, or “csv”) provide a file name using the <code>file_name</code> argument with the desired extension. Other argument options for this function include:</p>
<ul>
<li>selecting for the start and end years or dates</li>
<li>choosing to use water years when selecting specific years</li>
<li>selecting whether or not to fill dates with missing data with NA’s (logical <code>fill_missing</code> argument)</li>
<li>selecting the number of digits to round the flow values (numeric <code>digits</code> argument)</li>
</ul>
<p>The following will write an “xlsx” file called “08NM116_data_data.xlsx” into your working directory that includes all daily flow data from that station in HYDAT:</p>
<div class="sourceCode" id="cb131"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/write_flow_data.html">write_flow_data</a></span><span class="op">(</span>station_number <span class="op">=</span> <span class="st">"08NM116"</span><span class="op">)</span></code></pre></div>
<p>The following is an example of possible customization:</p>
<div class="sourceCode" id="cb132"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb132-1"><a href="#cb132-1"></a><span class="kw">write_flow_data</span>(<span class="dt">station_number =</span> <span class="st">"08NM116"</span>,</span>
<span id="cb132-2"><a href="#cb132-2"></a>                <span class="dt">start_year =</span> <span class="dv">1960</span>,</span>
<span id="cb132-3"><a href="#cb132-3"></a>                <span class="dt">end_year =</span> <span class="dv">1970</span></span>
<span id="cb132-4"><a href="#cb132-4"></a>                <span class="dt">fill_missing =</span> <span class="ot">TRUE</span>,</span>
<span id="cb132-5"><a href="#cb132-5"></a>                <span class="dt">file_name =</span> <span class="st">"mission_creek.csv"</span>)</span></code></pre></div>
</div>
<div id="writing-a-data-frame" class="section level4">
<h4 class="hasAnchor">
<a href="#writing-a-data-frame" class="anchor"></a>Writing a data frame</h4>
<p>While you can use the base R <code>write_csv()</code> or <code>writexl</code> package functions to save your data, the package provides a function with options to choose for file type and the rounding of digits. To directly save a data frame onto your computer you can use the <code><a href="../reference/write_results.html">write_results()</a></code> function. This function allows you to decide on file extensions of “xlsx”, “xls”, or “csv” by including it in the <code>file_name</code> argument when you name the file. This function also allows you to round all numeric columns by selecting the number of digits using the numeric <code>digits</code> argument.</p>
<div class="sourceCode" id="cb133"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">annual_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/calc_annual_stats.html">calc_annual_stats</a></span><span class="op">(</span>station_number <span class="op">=</span> <span class="st">"08NM116"</span><span class="op">)</span>

<span class="fu"><a href="../reference/write_results.html">write_results</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">annual_data</span>,
              digits <span class="op">=</span> <span class="fl">3</span>,
              file_name <span class="op">=</span> <span class="st">"mission_creek_annual_flows.xlsx"</span><span class="op">)</span></code></pre></div>
</div>
<div id="writing-a-list-of-plots" class="section level4">
<h4 class="hasAnchor">
<a href="#writing-a-list-of-plots" class="anchor"></a>Writing a list of plots</h4>
<p>As all plots produced with this package are contained within lists, a function is provided to assist in saving a list of plots into either a folder, where all plot files are named by the object names within the list, or combined PDF document, using the <code><a href="../reference/write_plots.html">write_plots()</a></code> function. The name of the folder or PDF document is provided using the <code>folder_name</code> argument. If the folder does not exist, one will be created. Options to customize output size with <code>width</code>, <code>height</code>, <code>units</code> and <code>dpi</code> arguments, as similar to those in <code>ggplots2:ggsave()</code>, can also be used.</p>
<p>The following will save each annual plot as a “png” file in a folder called “Annual Plots” in the working directory:</p>
<div class="sourceCode" id="cb134"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">annual_plots</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/plot_annual_stats.html">plot_annual_stats</a></span><span class="op">(</span>station_number <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"08NM116"</span>,<span class="st">"08NM242"</span><span class="op">)</span><span class="op">)</span>

<span class="fu"><a href="../reference/write_plots.html">write_plots</a></span><span class="op">(</span>plots <span class="op">=</span> <span class="va">annual_data</span>,
            folder_name <span class="op">=</span> <span class="st">"Annual Plots"</span>,
            plot_filetype <span class="op">=</span> <span class="st">"png"</span><span class="op">)</span></code></pre></div>
<p>The following will save all annual plots as combined “pdf” document called “Annual Plots” in the working directory with each plot on a different page:</p>
<div class="sourceCode" id="cb135"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">annual_plots</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/plot_annual_stats.html">plot_annual_stats</a></span><span class="op">(</span>station_number <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"08NM116"</span>,<span class="st">"08NM242"</span><span class="op">)</span><span class="op">)</span>

<span class="fu"><a href="../reference/write_plots.html">write_plots</a></span><span class="op">(</span>plots <span class="op">=</span> <span class="va">annual_data</span>,
            folder_name <span class="op">=</span> <span class="st">"Annual Plots"</span>,
            combined_pdf <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></code></pre></div>
<p>If you would prefer to save the plots using other functions, like the <code><a href="https://ggplot2.tidyverse.org/reference/ggsave.html">ggplot2::ggsave()</a></code> function, the desired plot must subsetted from the list first so the object provided the function is a plot object and not a list. Individual plots can be subsetted from their lists using either the dollar sign, $ (e.g. <code>one_plot &lt;- plots$plotname</code>), or double square brackets, [ ] (e.g. <code>one_plot &lt;- plots[[plotname]]</code> or <code>one_plot &lt;- plots[[1]]</code>).</p>
</div>
<div id="writing-a-list-of-data-frames-and-plots" class="section level4">
<h4 class="hasAnchor">
<a href="#writing-a-list-of-data-frames-and-plots" class="anchor"></a>Writing a list of data frames and plots</h4>
<p>As some objects produced with this package, mainly with the <code>compute_*</code> functions, contain lists of both data frames and <code>ggplot2</code> objects, a function is provided, called <code><a href="../reference/write_objects_list.html">write_objects_list()</a></code>, to assist in saving all objects within the list into a designated directory folder, where all table and plot files are named by the object names. The name of the folder is provided using the <code>folder_name</code> argument. If the folder does not exist, one will be created. The file type for tables and plots are chosen using the <code>table_filetype</code> and <code>plot_filetype</code> arguments respectively. There are also options to customize plot output size with <code>width</code>, <code>height</code>, <code>units</code> and <code>dpi</code> arguments, as similar to those in <code>ggplots2:ggsave()</code> can also be used.</p>
<p>The following will save all plots and tables in a folder called “Frequency Analysis” in the working directory:</p>
<div class="sourceCode" id="cb136"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">freq_analysis</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/compute_annual_frequencies.html">compute_annual_frequencies</a></span><span class="op">(</span>station_number <span class="op">=</span> <span class="st">"08NM116"</span><span class="op">)</span>

<span class="fu"><a href="../reference/write_objects_list.html">write_objects_list</a></span><span class="op">(</span>list <span class="op">=</span> <span class="va">freq_analysis</span>,
                   folder_name <span class="op">=</span> <span class="st">"Frequency Analysis"</span>,
                   plot_filetype <span class="op">=</span> <span class="st">"png"</span>,
                   table_filetype <span class="op">=</span> <span class="st">"xlsx"</span><span class="op">)</span></code></pre></div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Jon Goetz, Carl James Schwarz.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
